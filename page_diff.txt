diff --git a/frontend/src/app/app/page.tsx b/frontend/src/app/app/page.tsx
index be49289..1db02b4 100644
--- a/frontend/src/app/app/page.tsx
+++ b/frontend/src/app/app/page.tsx
@@ -316,6 +316,16 @@ export default function AppPage() {
     const [showAuthModal, setShowAuthModal] = useState(false);
     const [timeRemaining, setTimeRemaining] = useState({ hours: 23, minutes: 45, seconds: 12 });
 
+    // Estado para ├║ltimo CV m├ígico
+    const [lastCV, setLastCV] = useState<{
+        has_last_cv: boolean;
+        filename?: string;
+        time_ago?: string;
+        is_recent?: boolean;
+        analysis_id?: string;
+        job_description?: string;
+    } | null>(null);
+
     // Cleanup ao desmontar componente
     useEffect(() => {
         return () => {
@@ -1411,357 +1421,427 @@ export default function AppPage() {
         })();
     }, [authUserId, creditsRemaining, stage]);
 
-    // Fun├º├úo para lidar com sele├º├úo de item do hist├│rico
-    const handleSelectHistory = async (item: HistoryItem) => {
+    // Fun├º├úo para buscar ├║ltimo CV do usu├írio
+    const fetchLastCV = async () => {
+        if (!authUserId) return;
+
         try {
-            // Se j├í temos o resultado completo, apenas definimos
-            if (item.full_result) {
-                setReportData(item.full_result);
-                setSelectedHistoryItem(item);
-                setStage("paid");
+            console.log("[LastCV] Buscando ├║ltimo CV para usu├írio:", authUserId);
+            const response = await fetch(`${getApiUrl()}/api/user/last-cv/${authUserId}`);
+
+            if (!response.ok) {
+                console.log("[LastCV] Nenhum CV encontrado ou erro na busca");
+                setLastCV(null);
                 return;
-            }
 
-            // Caso contr├írio, precisamos buscar o resultado completo
-            setApiError("");
+                const data = await response.json();
+                console.log("[LastCV] Dados recebidos:", data);
+                setLastCV(data);
 
-            const response = await fetch(`${getApiUrl()}/api/user/history/detail?id=${item.id}`);
+                // Salvar no localStorage para que o modal possa acessar
+                try {
+                    localStorage.setItem('vant_last_cv', JSON.stringify(data));
+                    console.log("[LastCV] Salvo no localStorage para modal");
+                } catch (error) {
+                    console.error("[LastCV] Erro ao salvar no localStorage:", error);
+                }
 
-            if (!response.ok) {
-                throw new Error(`Erro ${response.status}: ${response.statusText}`);
-            }
+                // useEffect para buscar ├║ltimo CV quando usu├írio logar e estiver no hero
+                useEffect(() => {
+                    if (authUserId && stage === "hero") {
+                        fetchLastCV();
+                    }
+                }, [authUserId, stage]);
 
-            const fullResult = await response.json();
+                // Fun├º├úo para usar ├║ltimo CV
+                const useLastCV = async () => {
+                    if (!lastCV || !lastCV.analysis_id) return;
 
-            // Atualiza o item com o resultado completo
-            const updatedItem = { ...item, full_result: fullResult.data };
-            setSelectedHistoryItem(updatedItem);
-            setReportData(fullResult.data);
-            setStage("paid");
-        } catch (err) {
-            console.error("Erro ao carregar detalhe do hist├│rico:", err);
-            setApiError(err instanceof Error ? err.message : "Erro ao carregar an├ílise");
-        }
-    };
+                    try {
+                        console.log("[LastCV] Usando ├║ltimo CV:", lastCV.analysis_id);
 
-    const handleBackFromHistory = () => {
-        setSelectedHistoryItem(null);
-        setStage("hero");
-    };
+                        // Buscar detalhes completos da an├ílise
+                        const response = await fetch(`${getApiUrl()}/api/user/history/detail?id=${lastCV.analysis_id}`);
 
-    useEffect(() => {
-        console.log("[useEffect processing_premium] Entrou. Estado atual:", { stage, jobDescription: !!jobDescription, file: !!file, authUserId });
-        if (stage !== "processing_premium") {
-            console.log("[useEffect processing_premium] Stage n├úo ├® processing_premium, saindo.");
-            return;
-        }
-        if (!authUserId) {
-            setPremiumError("Fa├ºa login para continuar.");
-            setStage("checkout");
-            return;
-        }
-        if (!jobDescription.trim() || !file) {
-            // Tentar restaurar do localStorage (caso de remontagem)
-            if (typeof window !== "undefined") {
-                const savedJob = localStorage.getItem("vant_jobDescription");
-                const savedFileB64 = localStorage.getItem("vant_file_b64");
-                const savedFileName = localStorage.getItem("vant_file_name");
-                const savedFileType = localStorage.getItem("vant_file_type");
-                if (savedJob && savedFileB64 && savedFileName && savedFileType) {
-                    console.log("[processing_premium] Restaurando do localStorage...");
-                    setIsRestoringData(true);
-                    setJobDescription(savedJob);
-                    fetch(savedFileB64)
-                        .then(res => res.blob())
-                        .then(blob => {
-                            const restoredFile = new File([blob], savedFileName, { type: savedFileType });
-                            setFile(restoredFile);
-                            setIsRestoringData(false);
-                            console.log("[processing_premium] Dados restaurados!");
-                        })
-                        .catch(err => {
-                            console.error("[processing_premium] Erro:", err);
-                            setIsRestoringData(false);
-                        });
-                    return;
-                }
-            }
-            console.log("[processing_premium] Usu├írio comprou cr├®ditos, redirecionando para hero para usar cr├®ditos...");
-            // setPremiumError("Para usar seus cr├®ditos, envie seu CV primeiro."); // Removido para n├úo assustar usu├írio
-            setStage("hero");
-            return;
-        }
+                        if (!response.ok) {
+                            throw new Error(`Erro ${response.status}: ${response.statusText}`);
+                        }
 
-        if (isRestoringData) {
-            console.log("[processing_premium] Aguardando restaura├º├úo...");
-            return;
-        }
+                        const fullResult = await response.json();
 
-        // Persistir dados essenciais em localStorage para evitar perda em recarregamentos
-        if (typeof window !== "undefined") {
-            if (jobDescription) localStorage.setItem("vant_jobDescription", jobDescription);
-            // N├úo armazenamos o File em localStorage (muito grande), mas podemos avisar se ele foi perdido
-        }
+                        // Restaurar job description se existir
+                        if (lastCV.job_description) {
+                            setJobDescription(lastCV.job_description);
+                        }
 
-        (async () => {
-            setPremiumError("");
-            setProgress(0);
-            setStatusText("");
-            try {
-                const updateStatus = async (text: string, percent: number) => {
-                    setStatusText(text);
-                    setProgress(percent);
-                    // Quando backend atualiza, zera o timer estimado
-                    if (percent >= 90) {
-                        setEstimatedTimeRemaining(5);
+                        // Criar arquivo mock baseado no filename (n├úo temos o arquivo original)
+                        // Isso serve como placeholder - o usu├írio pode substituir se quiser
+                        const mockFile = new File([""], lastCV.filename || "cv.pdf", { type: "application/pdf" });
+                        setFile(mockFile);
+
+                        // Mostrar mensagem de sucesso
+                        console.log("[LastCV] CV restaurado com sucesso!");
+
+                        // Limpar estado do lastCV ap├│s uso
+                        setLastCV(null);
+
+                    } catch (error) {
+                        console.error("[LastCV] Erro ao usar ├║ltimo CV:", error);
+                        setApiError("N├úo foi poss├¡vel restaurar seu ├║ltimo CV. Por favor, envie o arquivo novamente.");
                     }
-                    await sleep(220);
                 };
 
-                await updateStatus("­ƒöÆ PAGAMENTO VERIFICADO. INICIANDO IA GENERATIVA...", 10);
-                await updateStatus("REESCREVENDO SEU CV (AGENT)...", 35);
+                // Fun├º├úo para lidar com sele├º├úo de item do hist├│rico
+                const handleSelectHistory = async (item: HistoryItem) => {
+                    try {
+                        // Se j├í temos o resultado completo, apenas definimos
+                        if (item.full_result) {
+                            setReportData(item.full_result);
+                            setSelectedHistoryItem(item);
+                            setStage("paid");
+                            return;
+                        }
+
+                        // Caso contr├írio, precisamos buscar o resultado completo
+                        setApiError("");
 
-                // Cancelar requisi├º├Áes anteriores
-                if (abortControllerRef.current) {
-                    abortControllerRef.current.abort();
-                }
-                abortControllerRef.current = new AbortController();
+                        const response = await fetch(`${getApiUrl()}/api/user/history/detail?id=${item.id}`);
 
-                const form = new FormData();
-                form.append("user_id", authUserId);
-                form.append("job_description", jobDescription);
-                form.append("file", file);
+                        if (!response.ok) {
+                            throw new Error(`Erro ${response.status}: ${response.statusText}`);
+                        }
 
-                // Adicionar ├írea de interesse se for vaga gen├®rica
-                if (useGenericJob && selectedArea) {
-                    form.append("area_of_interest", selectedArea);
-                }
+                        const fullResult = await response.json();
 
-                if (competitorFiles && competitorFiles.length) {
-                    for (const cf of competitorFiles) {
-                        form.append("competitor_files", cf);
+                        // Atualiza o item com o resultado completo
+                        const updatedItem = { ...item, full_result: fullResult.data };
+                        setSelectedHistoryItem(updatedItem);
+                        setReportData(fullResult.data);
+                        setStage("paid");
+                    } catch (err) {
+                        console.error("Erro ao carregar detalhe do hist├│rico:", err);
+                        setApiError(err instanceof Error ? err.message : "Erro ao carregar an├ílise");
                     }
-                }
+                };
 
-                const resp = await fetch(`${getApiUrl()}/api/analyze-premium-paid`, {
-                    method: "POST",
-                    body: form,
-                    signal: abortControllerRef.current.signal
-                });
-                const payload = (await resp.json()) as JsonObject;
-                if (!resp.ok) {
-                    const err = typeof payload.error === "string" ? payload.error : `HTTP ${resp.status}`;
-                    throw new Error(err);
-                }
+                const handleBackFromHistory = () => {
+                    setSelectedHistoryItem(null);
+                    setStage("hero");
+                };
+
+                useEffect(() => {
+                    console.log("[useEffect processing_premium] Entrou. Estado atual:", { stage, jobDescription: !!jobDescription, file: !!file, authUserId });
+                    if (stage !== "processing_premium") {
+                        console.log("[useEffect processing_premium] Stage n├úo ├® processing_premium, saindo.");
+                        return;
+                    }
+                    if (!authUserId) {
+                        setPremiumError("Fa├ºa login para continuar.");
+                        setStage("checkout");
+                        return;
+                    }
+                    if (!jobDescription.trim() || !file) {
+                        // Tentar restaurar do localStorage (caso de remontagem)
+                        if (typeof window !== "undefined") {
+                            const savedJob = localStorage.getItem("vant_jobDescription");
+                            const savedFileB64 = localStorage.getItem("vant_file_b64");
+                            const savedFileName = localStorage.getItem("vant_file_name");
+                            const savedFileType = localStorage.getItem("vant_file_type");
+                            if (savedJob && savedFileB64 && savedFileName && savedFileType) {
+                                console.log("[processing_premium] Restaurando do localStorage...");
+                                setIsRestoringData(true);
+                                setJobDescription(savedJob);
+                                fetch(savedFileB64)
+                                    .then(res => res.blob())
+                                    .then(blob => {
+                                        const restoredFile = new File([blob], savedFileName, { type: savedFileType });
+                                        setFile(restoredFile);
+                                        setIsRestoringData(false);
+                                        console.log("[processing_premium] Dados restaurados!");
+                                    })
+                                    .catch(err => {
+                                        console.error("[processing_premium] Erro:", err);
+                                        setIsRestoringData(false);
+                                    });
+                                return;
+                            }
+                        }
+                        console.log("[processing_premium] Usu├írio comprou cr├®ditos, redirecionando para hero para usar cr├®ditos...");
+                        // setPremiumError("Para usar seus cr├®ditos, envie seu CV primeiro."); // Removido para n├úo assustar usu├írio
+                        setStage("hero");
+                        return;
+                    }
 
-                // Verificar se ├® resposta de progressive loading
-                if (payload.session_id && payload.status === "processing") {
-                    console.log("[Progressive Loading] Recebido session_id:", payload.session_id);
+                    if (isRestoringData) {
+                        console.log("[processing_premium] Aguardando restaura├º├úo...");
+                        return;
+                    }
 
-                    // Salvar session_id no estado
-                    setSessionId(payload.session_id as string);
+                    // Persistir dados essenciais em localStorage para evitar perda em recarregamentos
+                    if (typeof window !== "undefined") {
+                        if (jobDescription) localStorage.setItem("vant_jobDescription", jobDescription);
+                        // N├úo armazenamos o File em localStorage (muito grande), mas podemos avisar se ele foi perdido
+                    }
 
-                    // Iniciar polling para acompanhar progresso
-                    await pollAnalysisProgress(
-                        payload.session_id as string,
-                        updateStatus,
-                        setReportData,
-                        setStage,
-                        setCreditsRemaining
-                    );
-                    return;
-                }
+                    (async () => {
+                        setPremiumError("");
+                        setProgress(0);
+                        setStatusText("");
+                        try {
+                            const updateStatus = async (text: string, percent: number) => {
+                                setStatusText(text);
+                                setProgress(percent);
+                                // Quando backend atualiza, zera o timer estimado
+                                if (percent >= 90) {
+                                    setEstimatedTimeRemaining(5);
+                                }
+                                await sleep(220);
+                            };
 
-                // Sistema antigo (fallback)
-                await updateStatus("FINALIZANDO DOSSI├è...", 90);
-                await sleep(350);
-                await updateStatus("DOSSI├è PRONTO.", 100);
-                await sleep(200);
+                            await updateStatus("­ƒöÆ PAGAMENTO VERIFICADO. INICIANDO IA GENERATIVA...", 10);
+                            await updateStatus("REESCREVENDO SEU CV (AGENT)...", 35);
 
-                const report = payload.data;
-                setReportData(report && typeof report === "object" ? (report as ReportData) : null);
+                            // Cancelar requisi├º├Áes anteriores
+                            if (abortControllerRef.current) {
+                                abortControllerRef.current.abort();
+                            }
+                            abortControllerRef.current = new AbortController();
 
-                const entitlements = payload.entitlements;
-                if (entitlements && typeof entitlements === "object") {
-                    const cr = (entitlements as JsonObject).credits_remaining;
-                    if (typeof cr === "number") {
-                        setCreditsRemaining(cr);
-                    }
-                }
-                setStage("paid");
-            } catch (e: unknown) {
-                // Ignorar AbortError (navega├º├úo entre abas)
-                if (e instanceof Error && e.name === 'AbortError') {
-                    console.log('Processamento premium cancelado ao navegar');
-                    return;
-                }
-                setPremiumError(getErrorMessage(e, "Erro na gera├º├úo premium"));
-                setStage("hero");
-            }
-        })();
-    }, [authUserId, competitorFiles, stage, jobDescription, file]);
+                            const form = new FormData();
+                            form.append("user_id", authUserId);
+                            form.append("job_description", jobDescription);
+                            form.append("file", file);
 
-    // Ref para auto-trigger premium ap├│s lite (skip preview do modal Dashboard)
-    const pendingSkipPreview = useRef(false);
+                            // Adicionar ├írea de interesse se for vaga gen├®rica
+                            if (useGenericJob && selectedArea) {
+                                form.append("area_of_interest", selectedArea);
+                            }
 
-    async function onStart() {
-        console.log("[onStart] Chamado.");
+                            if (competitorFiles && competitorFiles.length) {
+                                for (const cf of competitorFiles) {
+                                    form.append("competitor_files", cf);
+                                }
+                            }
 
-        if (!jobDescription.trim() || !file) {
-            console.warn("[onStart] Retorno antecipado: jobDescription ou file vazios.");
-            return;
-        }
+                            const resp = await fetch(`${getApiUrl()}/api/analyze-premium-paid`, {
+                                method: "POST",
+                                body: form,
+                                signal: abortControllerRef.current.signal
+                            });
+                            const payload = (await resp.json()) as JsonObject;
+                            if (!resp.ok) {
+                                const err = typeof payload.error === "string" ? payload.error : `HTTP ${resp.status}`;
+                                throw new Error(err);
+                            }
 
-        // Se skipPreview ativo (modal Dashboard), pular lite inteiro e ir direto para premium
-        if (pendingSkipPreview.current) {
-            pendingSkipPreview.current = false;
-            console.log("[onStart] skipPreview ativo, pulando analyze-lite e indo direto para processing_premium...");
-            setApiError("");
-            setReportData(null);
-            setPremiumError("");
-            setProgress(0);
-            setStatusText("");
-            setStage("processing_premium");
-            return;
-        }
+                            // Verificar se ├® resposta de progressive loading
+                            if (payload.session_id && payload.status === "processing") {
+                                console.log("[Progressive Loading] Recebido session_id:", payload.session_id);
 
-        console.log("[onStart] Iniciando an├ílise (diagn├│stico) para todos os usu├írios...");
-
-        // 1. Resetar estados visuais
-        setApiError("");
-        setPreviewData(null);
-        setReportData(null);
-        setPremiumError("");
-        setProgress(0);
-        setStatusText("");
-        setStage("analyzing");
-
-        // 2. Preparar o FormData
-        const form = new FormData();
-        form.append("job_description", jobDescription);
-        form.append("file", file);
-
-        // Adicionar ├írea de interesse se for vaga gen├®rica
-        if (useGenericJob && selectedArea) {
-            form.append("area_of_interest", selectedArea);
-        }
+                                // Salvar session_id no estado
+                                setSessionId(payload.session_id as string);
 
-        try {
-            // 3. Disparar a requisi├º├úo em BACKGROUND (sem await imediato)
-            // A API trabalha enquanto rodamos o roteiro visual
+                                // Iniciar polling para acompanhar progresso
+                                await pollAnalysisProgress(
+                                    payload.session_id as string,
+                                    updateStatus,
+                                    setReportData,
+                                    setStage,
+                                    setCreditsRemaining
+                                );
+                                return;
+                            }
 
-            // Cancelar requisi├º├Áes anteriores
-            if (abortControllerRef.current) {
-                abortControllerRef.current.abort();
-            }
-            abortControllerRef.current = new AbortController();
+                            // Sistema antigo (fallback)
+                            await updateStatus("FINALIZANDO DOSSI├è...", 90);
+                            await sleep(350);
+                            await updateStatus("DOSSI├è PRONTO.", 100);
+                            await sleep(200);
 
-            const apiRequestPromise = fetch(`${getApiUrl()}/api/analyze-lite`, {
-                method: "POST",
-                body: form,
-                signal: abortControllerRef.current.signal
-            });
+                            const report = payload.data;
+                            setReportData(report && typeof report === "object" ? (report as ReportData) : null);
+
+                            const entitlements = payload.entitlements;
+                            if (entitlements && typeof entitlements === "object") {
+                                const cr = (entitlements as JsonObject).credits_remaining;
+                                if (typeof cr === "number") {
+                                    setCreditsRemaining(cr);
+                                }
+                            }
+                            setStage("paid");
+                        } catch (e: unknown) {
+                            // Ignorar AbortError (navega├º├úo entre abas)
+                            if (e instanceof Error && e.name === 'AbortError') {
+                                console.log('Processamento premium cancelado ao navegar');
+                                return;
+                            }
+                            setPremiumError(getErrorMessage(e, "Erro na gera├º├úo premium"));
+                            setStage("hero");
+                        }
+                    })();
+                }, [authUserId, competitorFiles, stage, jobDescription, file]);
 
-            // 4. Roteiro da Ansiedade (Total ~8000ms)
-            // Tempos vari├íveis para parecer org├ónico
+                // Ref para auto-trigger premium ap├│s lite (skip preview do modal Dashboard)
+                const pendingSkipPreview = useRef(false);
 
-            // 0s - 1.5s: Protocolo Inicial (R├ípido)
-            setStatusText("INICIANDO PROTOCOLO DE SEGURAN├çA VANT...");
-            setProgress(10);
-            await sleep(1500);
+                async function onStart() {
+                    console.log("[onStart] Chamado.");
 
-            // 1.5s - 3.5s: Parsing (2s - Parece que est├í lendo o arquivo f├¡sico)
-            setStatusText("LENDO ESTRUTURA DO PDF (PARSING)...");
-            setProgress(30);
-            await sleep(2000);
+                    if (!jobDescription.trim() || !file) {
+                        console.warn("[onStart] Retorno antecipado: jobDescription ou file vazios.");
+                        return;
+                    }
 
-            // 3.5s - 5.0s: Extra├º├úo (1.5s)
-            setStatusText("EXTRAINDO PALAVRAS-CHAVE DA VAGA...");
-            setProgress(55);
-            await sleep(1500);
+                    // Se skipPreview ativo (modal Dashboard), pular lite inteiro e ir direto para premium
+                    if (pendingSkipPreview.current) {
+                        pendingSkipPreview.current = false;
+                        console.log("[onStart] skipPreview ativo, pulando analyze-lite e indo direto para processing_premium...");
+                        setApiError("");
+                        setReportData(null);
+                        setPremiumError("");
+                        setProgress(0);
+                        setStatusText("");
+                        setStage("processing_premium");
+                        return;
+                    }
 
-            // 5.0s - 7.0s: Cruzamento (2s - O momento "dif├¡cil/m├ígico")
-            setStatusText("CRUZANDO DADOS: EXPERI├èNCIA vs REQUISITOS...");
-            setProgress(80);
-            await sleep(2000);
+                    console.log("[onStart] Iniciando an├ílise (diagn├│stico) para todos os usu├írios...");
+
+                    // 1. Resetar estados visuais
+                    setApiError("");
+                    setPreviewData(null);
+                    setReportData(null);
+                    setPremiumError("");
+                    setProgress(0);
+                    setStatusText("");
+                    setStage("analyzing");
+
+                    // 2. Preparar o FormData
+                    const form = new FormData();
+                    form.append("job_description", jobDescription);
+                    form.append("file", file);
+
+                    // Adicionar ├írea de interesse se for vaga gen├®rica
+                    if (useGenericJob && selectedArea) {
+                        form.append("area_of_interest", selectedArea);
+                    }
 
-            // 7.0s - 8.0s: Score Final (R├ípido para fechar)
-            setStatusText("GERANDO SCORE DE ADER├èNCIA...");
-            setProgress(95);
-            await sleep(1000);
+                    try {
+                        // 3. Disparar a requisi├º├úo em BACKGROUND (sem await imediato)
+                        // A API trabalha enquanto rodamos o roteiro visual
 
-            // 5. Verificar resposta da API (Se j├í acabou, libera. Se n├úo, espera o resto)
-            const resp = await apiRequestPromise;
+                        // Cancelar requisi├º├Áes anteriores
+                        if (abortControllerRef.current) {
+                            abortControllerRef.current.abort();
+                        }
+                        abortControllerRef.current = new AbortController();
 
-            if (!resp.ok) {
-                const text = await resp.text();
-                throw new Error(text || `HTTP ${resp.status}`);
-            }
+                        const apiRequestPromise = fetch(`${getApiUrl()}/api/analyze-lite`, {
+                            method: "POST",
+                            body: form,
+                            signal: abortControllerRef.current.signal
+                        });
 
-            const data = (await resp.json()) as unknown;
+                        // 4. Roteiro da Ansiedade (Total ~8000ms)
+                        // Tempos vari├íveis para parecer org├ónico
 
-            // 6. Transi├º├úo final
-            setStatusText("RELAT├ôRIO PRONTO. CARREGANDO...");
-            setProgress(100);
-            await sleep(500); // Pequena pausa para ler a conclus├úo
+                        // 0s - 1.5s: Protocolo Inicial (R├ípido)
+                        setStatusText("INICIANDO PROTOCOLO DE SEGURAN├çA VANT...");
+                        setProgress(10);
+                        await sleep(1500);
 
-            setPreviewData(data as PreviewData);
-            setStage("preview");
+                        // 1.5s - 3.5s: Parsing (2s - Parece que est├í lendo o arquivo f├¡sico)
+                        setStatusText("LENDO ESTRUTURA DO PDF (PARSING)...");
+                        setProgress(30);
+                        await sleep(2000);
 
-        } catch (e: unknown) {
-            // Ignorar AbortError (navega├º├úo entre abas)
-            if (e instanceof Error && e.name === 'AbortError') {
-                console.log('Processamento lite cancelado ao navegar');
-                return;
-            }
+                        // 3.5s - 5.0s: Extra├º├úo (1.5s)
+                        setStatusText("EXTRAINDO PALAVRAS-CHAVE DA VAGA...");
+                        setProgress(55);
+                        await sleep(1500);
 
-            const message = getErrorMessage(e, "Erro no Scanner Lite");
-            setApiError(message);
-            setStage("hero");
-        }
-    }
-    function openFileDialog() {
-        uploaderInputRef.current?.click();
-    }
+                        // 5.0s - 7.0s: Cruzamento (2s - O momento "dif├¡cil/m├ígico")
+                        setStatusText("CRUZANDO DADOS: EXPERI├èNCIA vs REQUISITOS...");
+                        setProgress(80);
+                        await sleep(2000);
 
-    function openCompetitorFileDialog() {
-        competitorUploaderInputRef.current?.click();
-    }
+                        // 7.0s - 8.0s: Score Final (R├ípido para fechar)
+                        setStatusText("GERANDO SCORE DE ADER├èNCIA...");
+                        setProgress(95);
+                        await sleep(1000);
 
-    function onUseCreditFromPreview() {
-        console.log("[onUseCreditFromPreview] Usu├írio clicou em usar cr├®dito a partir do diagn├│stico.");
+                        // 5. Verificar resposta da API (Se j├í acabou, libera. Se n├úo, espera o resto)
+                        const resp = await apiRequestPromise;
 
-        if (!authUserId || creditsRemaining <= 0) {
-            console.error("[onUseCreditFromPreview] Sem cr├®ditos ou n├úo autenticado.");
-            return;
-        }
+                        if (!resp.ok) {
+                            const text = await resp.text();
+                            throw new Error(text || `HTTP ${resp.status}`);
+                        }
 
-        if (!jobDescription.trim() || !file) {
-            console.error("[onUseCreditFromPreview] Dados incompletos para processamento premium");
-            setPremiumError("Preencha a vaga e envie seu CV antes de continuar.");
-            setStage("hero");
-            return;
-        }
+                        const data = (await resp.json()) as unknown;
 
-        console.log("[onUseCreditFromPreview] Dados OK, iniciando processamento premium...");
-        setApiError("");
-        setReportData(null);
-        setPremiumError("");
-        setProgress(0);
-        setStatusText("");
-        setStage("processing_premium");
-    }
+                        // 6. Transi├º├úo final
+                        setStatusText("RELAT├ôRIO PRONTO. CARREGANDO...");
+                        setProgress(100);
+                        await sleep(500); // Pequena pausa para ler a conclus├úo
+
+                        setPreviewData(data as PreviewData);
+                        setStage("preview");
+
+                    } catch (e: unknown) {
+                        // Ignorar AbortError (navega├º├úo entre abas)
+                        if (e instanceof Error && e.name === 'AbortError') {
+                            console.log('Processamento lite cancelado ao navegar');
+                            return;
+                        }
+
+                        const message = getErrorMessage(e, "Erro no Scanner Lite");
+                        setApiError(message);
+                        setStage("hero");
+                    }
+                }
+                function openFileDialog() {
+                    uploaderInputRef.current?.click();
+                }
+
+                function openCompetitorFileDialog() {
+                    competitorUploaderInputRef.current?.click();
+                }
 
-    function renderDashboardMetricsHtml(nota: number, veredito: string, potencial: number, pilares: PilaresData, gapsFatals: number = 0) {
-        const getNum = (v: unknown) => (typeof v === "number" ? v : 0);
-        const impacto = getNum(pilares.impacto);
-        const keywords = getNum(pilares.keywords);
-        const ats = getNum(pilares.ats);
+                function onUseCreditFromPreview() {
+                    console.log("[onUseCreditFromPreview] Usu├írio clicou em usar cr├®dito a partir do diagn├│stico.");
 
-        // ­ƒÄ» C├ílculo inteligente do score projetado
-        const projected = calculateProjectedScore(nota, gapsFatals, 0, ats, keywords, impacto);
+                    if (!authUserId || creditsRemaining <= 0) {
+                        console.error("[onUseCreditFromPreview] Sem cr├®ditos ou n├úo autenticado.");
+                        return;
+                    }
+
+                    if (!jobDescription.trim() || !file) {
+                        console.error("[onUseCreditFromPreview] Dados incompletos para processamento premium");
+                        setPremiumError("Preencha a vaga e envie seu CV antes de continuar.");
+                        setStage("hero");
+                        return;
+                    }
+
+                    console.log("[onUseCreditFromPreview] Dados OK, iniciando processamento premium...");
+                    setApiError("");
+                    setReportData(null);
+                    setPremiumError("");
+                    setProgress(0);
+                    setStatusText("");
+                    setStage("processing_premium");
+                }
+
+                function renderDashboardMetricsHtml(nota: number, veredito: string, potencial: number, pilares: PilaresData, gapsFatals: number = 0) {
+                    const getNum = (v: unknown) => (typeof v === "number" ? v : 0);
+                    const impacto = getNum(pilares.impacto);
+                    const keywords = getNum(pilares.keywords);
+                    const ats = getNum(pilares.ats);
+
+                    // ­ƒÄ» C├ílculo inteligente do score projetado
+                    const projected = calculateProjectedScore(nota, gapsFatals, 0, ats, keywords, impacto);
 
-        const row = (label: string, value: number) => `
+                    const row = (label: string, value: number) => `
             <div style="display:flex; justify-content:space-between; margin-bottom:6px; align-items:center;">
                 <span style="color:#CBD5E1; font-size:0.75rem; font-weight:600; letter-spacing:0.5px;">${label.toUpperCase()}</span>
                 <div style="display:flex; align-items:center; gap:8px;">
@@ -1773,7 +1853,7 @@ export default function AppPage() {
             </div>
         `;
 
-        return `
+                    return `
             <div style="background: rgba(15, 23, 42, 0.6); border: 1px solid rgba(56, 189, 248, 0.15); border-radius: 12px; padding: 16px;">
                 <div style="margin-bottom: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                     <span style="color: #94A3B8; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700;">DIAGN├ôSTICO INICIAL</span>
@@ -1799,14 +1879,14 @@ export default function AppPage() {
                 </div>
             </div>
         `;
-    }
+                }
 
-    function renderLockedBlur(title: string, subtitle: string, contentPreview: string) {
-        const longContent = `${contentPreview} <br><br> ` +
-            "Impacto T├®cnico: Implementa├º├úo de rotinas de backup que reduziram incidentes em 15%. ".repeat(3) +
-            "Gest├úo de Tickets: SLA mantido acima de 98% com ferramenta GLPI e Jira. ";
+                function renderLockedBlur(title: string, subtitle: string, contentPreview: string) {
+                    const longContent = `${contentPreview} <br><br> ` +
+                        "Impacto T├®cnico: Implementa├º├úo de rotinas de backup que reduziram incidentes em 15%. ".repeat(3) +
+                        "Gest├úo de Tickets: SLA mantido acima de 98% com ferramenta GLPI e Jira. ";
 
-        return `
+                    return `
     <div class="locked-container" style="position: relative; overflow: hidden; border: 1px solid rgba(56, 189, 248, 0.2); border-radius: 12px; background: rgba(15, 23, 42, 0.6);">
         <div style="padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.05);">
             <div style="color: #38BDF8; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700;">
@@ -1829,12 +1909,12 @@ export default function AppPage() {
         </div>
     </div>
     `;
-    }
+                }
 
-    function renderOfferCard(itensChecklist: string[]) {
-        let listaHtml = "";
-        for (const item of itensChecklist) {
-            listaHtml += `
+                function renderOfferCard(itensChecklist: string[]) {
+                    let listaHtml = "";
+                    for (const item of itensChecklist) {
+                        listaHtml += `
         <li style="margin-bottom:12px; display:flex; align-items:start; gap:10px; line-height:1.4;">
             <div style="
                 min-width: 20px; height: 20px; 
@@ -1847,9 +1927,9 @@ export default function AppPage() {
             <span style="color:#E2E8F0; font-size:0.9rem;">${item}</span>
         </li>
         `;
-        }
+                    }
 
-        return `
+                    return `
     <div style="
         background: rgba(15, 23, 42, 0.8);
         background-image: linear-gradient(160deg, rgba(56, 189, 248, 0.05), rgba(129, 140, 248, 0.05));
@@ -1888,871 +1968,880 @@ export default function AppPage() {
         </div>
     </div>
     `;
-    }
-
-    // Componente visual de cr├®ditos
-    const renderCreditsIndicator = () => {
-        if (!authUserId) return null;
-
-        const isLow = creditsRemaining > 0 && creditsRemaining < 3;
-        const isHigh = creditsRemaining >= 20;
-        const isLoading = creditsLoading;
-
-        return (
-            <div style={{
-                position: 'fixed',
-                top: 20,
-                right: 20,
-                zIndex: 1000,
-                background: 'rgba(15, 23, 42, 0.95)',
-                border: `2px solid ${isLoading ? '#F59E0B' : isHigh ? '#10B981' : isLow ? '#F59E0B' : '#38BDF8'}`,
-                borderRadius: 12,
-                padding: '12px 16px',
-                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)',
-                backdropFilter: 'blur(8px)',
-                transition: 'all 0.3s ease',
-                minWidth: '120px'
-            }}>
-                <div style={{
-                    color: '#94A3B8',
-                    fontSize: '0.7rem',
-                    fontWeight: 600,
-                    textTransform: 'uppercase',
-                    letterSpacing: 1,
-                    marginBottom: 2
-                }}>
-                    {isLoading ? 'Carregando...' : 'Cr├®ditos'}
-                </div>
-                <div style={{
-                    color: isLoading ? '#F59E0B' : isHigh ? '#10B981' : isLow ? '#F59E0B' : '#F8FAFC',
-                    fontSize: '1.2rem',
-                    fontWeight: 900,
-                    lineHeight: 1,
-                    fontFamily: 'monospace',
-                    display: 'flex',
-                    alignItems: 'center',
-                    gap: '4px'
-                }}>
-                    {isLoading && (
-                        <div style={{
-                            width: '12px',
-                            height: '12px',
-                            border: '2px solid #F59E0B',
-                            borderTop: '2px solid transparent',
-                            borderRadius: '50%',
-                            animation: 'spin 1s linear infinite'
-                        }} />
-                    )}
-                    {!isLoading && creditsRemaining}
-                </div>
-                {!isLoading && creditsRemaining > 0 && (
-                    <div style={{ marginTop: '8px', borderTop: '1px solid rgba(255,255,255,0.1)', paddingTop: '8px' }}>
-                        <button
-                            onClick={openCustomerPortal}
-                            style={{
-                                background: 'rgba(139, 92, 246, 0.2)',
-                                border: '1px solid #8B5CF6',
-                                borderRadius: 6,
-                                padding: '6px 12px',
-                                color: '#8B5CF6',
-                                fontSize: '0.7rem',
-                                fontWeight: 600,
-                                cursor: 'pointer',
-                                transition: 'all 0.2s ease',
-                                whiteSpace: 'nowrap',
-                                width: '100%',
-                                textAlign: 'center'
-                            }}
-                            onMouseEnter={(e) => {
-                                e.currentTarget.style.background = 'rgba(139, 92, 246, 0.3)';
-                                e.currentTarget.style.transform = 'scale(1.02)';
-                            }}
-                            onMouseLeave={(e) => {
-                                e.currentTarget.style.background = 'rgba(139, 92, 246, 0.2)';
-                                e.currentTarget.style.transform = 'scale(1)';
-                            }}
-                            title="Gerenciar assinatura, cancelar ou alterar plano"
-                        >
-                            ÔÜÖ´©Å Gerenciar
-                        </button>
-                    </div>
-                )}
-                {!isLoading && (
-                    <div>
-                        {creditsRemaining > 0 ? (
-                            <>
-                                <button
-                                    onClick={() => setStage("pricing")}
-                                    data-cy="see-plans-button"
-                                    style={{
-                                        background: 'rgba(34, 197, 94, 0.2)',
-                                        border: '1px solid #22C55E',
-                                        borderRadius: 6,
-                                        padding: '6px 12px',
-                                        color: '#22C55E',
-                                        fontSize: '0.75rem',
-                                        fontWeight: 600,
-                                        cursor: 'pointer',
-                                        transition: 'all 0.2s ease',
-                                        whiteSpace: 'nowrap',
-                                        marginRight: '6px'
-                                    }}
-                                    onMouseEnter={(e) => {
-                                        e.currentTarget.style.background = 'rgba(34, 197, 94, 0.3)';
-                                        e.currentTarget.style.transform = 'scale(1.05)';
-                                    }}
-                                    onMouseLeave={(e) => {
-                                        e.currentTarget.style.background = 'rgba(34, 197, 94, 0.2)';
-                                        e.currentTarget.style.transform = 'scale(1)';
-                                    }}
-                                    title="Ver planos dispon├¡veis"
-                                >
-                                    Ver planos
-                                </button>
-                                <button
-                                    onClick={() => setStage("pricing")}
-                                    style={{
-                                        background: 'rgba(59, 130, 246, 0.2)',
-                                        border: '1px solid #3B82F6',
-                                        borderRadius: 6,
-                                        padding: '6px 12px',
-                                        color: '#3B82F6',
-                                        fontSize: '0.75rem',
-                                        fontWeight: 600,
-                                        cursor: 'pointer',
-                                        transition: 'all 0.2s ease',
-                                        whiteSpace: 'nowrap'
-                                    }}
-                                    onMouseEnter={(e) => {
-                                        e.currentTarget.style.background = 'rgba(59, 130, 246, 0.3)';
-                                        e.currentTarget.style.transform = 'scale(1.05)';
-                                    }}
-                                    onMouseLeave={(e) => {
-                                        e.currentTarget.style.background = 'rgba(59, 130, 246, 0.2)';
-                                        e.currentTarget.style.transform = 'scale(1)';
-                                    }}
-                                    title="Comprar mais cr├®ditos"
-                                >
-                                    + Comprar
-                                </button>
-                            </>
-                        ) : (
-                            <button
-                                onClick={() => setStage("pricing")}
-                                style={{
-                                    background: 'rgba(59, 130, 246, 0.2)',
-                                    border: '1px solid #3B82F6',
-                                    borderRadius: 6,
-                                    padding: '6px 12px',
-                                    color: '#3B82F6',
-                                    fontSize: '0.75rem',
-                                    fontWeight: 600,
-                                    cursor: 'pointer',
-                                    transition: 'all 0.2s ease',
-                                    whiteSpace: 'nowrap'
-                                }}
-                                onMouseEnter={(e) => {
-                                    e.currentTarget.style.background = 'rgba(59, 130, 246, 0.3)';
-                                    e.currentTarget.style.transform = 'scale(1.05)';
-                                }}
-                                onMouseLeave={(e) => {
-                                    e.currentTarget.style.background = 'rgba(59, 130, 246, 0.2)';
-                                    e.currentTarget.style.transform = 'scale(1)';
-                                }}
-                                title="Comprar cr├®ditos"
-                            >
-                                + Comprar
-                            </button>
-                        )}
-                    </div>
-                )}
-            </div>
-        );
-    };
+                }
 
-    if (loadingHistoryItem) {
-        return (
-            <main>
-                <div style={{
-                    display: "flex",
-                    alignItems: "center",
-                    justifyContent: "center",
-                    minHeight: "100vh",
-                    background: "#0F172A",
-                    color: "#94A3B8",
-                    fontSize: "1rem",
-                    fontFamily: "'Outfit', sans-serif",
-                }}>
-                    <div style={{ textAlign: "center" }}>
-                        <style>{`@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }`}</style>
-                        <div style={{
-                            width: 36,
-                            height: 36,
-                            border: "3px solid rgba(56, 189, 248, 0.2)",
-                            borderTop: "3px solid #38BDF8",
-                            borderRadius: "50%",
-                            animation: "spin 0.8s linear infinite",
-                            margin: "0 auto 16px",
-                        }} />
-                        Carregando an├ílise...
-                    </div>
-                </div>
-            </main>
-        );
-    }
+                // Componente visual de cr├®ditos
+                const renderCreditsIndicator = () => {
+                    if (!authUserId) return null;
 
-    return (
-        <main>
-            {renderCreditsIndicator()}
-            {stage === "hero" && (
-                <>
-                    {/* Indicador de Status do Usu├írio */}
-                    {authUserId && (
-                        <div style={{
-                            background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(56, 189, 248, 0.1))",
-                            border: "1px solid rgba(16, 185, 129, 0.3)",
-                            borderRadius: 12,
-                            padding: "16px 20px",
-                            margin: "0 auto 20px",
-                            maxWidth: "100%",
-                            textAlign: "center"
-                        }}>
-                            <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 12 }}>
-                                <div style={{
-                                    width: 40,
-                                    height: 40,
-                                    borderRadius: "50%",
-                                    background: "rgba(16, 185, 129, 0.2)",
-                                    display: "flex",
-                                    alignItems: "center",
-                                    justifyContent: "center",
-                                    fontSize: "1.2rem"
-                                }}>
-                                    Ô£à
-                                </div>
-                                <div style={{ flex: 1, textAlign: "left" }}>
-                                    <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 700, marginBottom: 2 }}>
-                                        Logado como {authEmail}
-                                    </div>
-                                    <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
-                                        {creditsRemaining > 0
-                                            ? `Voc├¬ tem ${creditsRemaining} cr├®dito(s) dispon├¡vel(is)`
-                                            : "Pronto para analisar seu CV"
-                                        }
-                                    </div>
-                                </div>
-                                <button
-                                    type="button"
-                                    onClick={async () => {
-                                        if (supabase) {
-                                            // Verifica├º├úo de tipo expl├¡cita para evitar never
-                                            const client = supabase as SupabaseClient;
-
-                                            await client.auth.signOut();
-                                        }
-                                    }}
-                                    style={{
-                                        background: "none",
-                                        border: "1px solid rgba(239, 68, 68, 0.3)",
-                                        color: "#EF4444",
-                                        borderRadius: 6,
-                                        padding: "6px 12px",
-                                        fontSize: "0.75rem",
-                                        cursor: "pointer",
-                                        transition: "all 0.2s"
-                                    }}
-                                    onMouseEnter={(e) => {
-                                        e.currentTarget.style.background = "rgba(239, 68, 68, 0.1)";
-                                    }}
-                                    onMouseLeave={(e) => {
-                                        e.currentTarget.style.background = "none";
-                                    }}
-                                >
-                                    Sair
-                                </button>
-                            </div>
-                        </div>
-                    )}
+                    const isLow = creditsRemaining > 0 && creditsRemaining < 3;
+                    const isHigh = creditsRemaining >= 20;
+                    const isLoading = creditsLoading;
 
-                    {/* Bot├úo de Login para Usu├írios N├úo Logados */}
-                    {!authUserId && (
+                    return (
                         <div style={{
-                            background: "linear-gradient(135deg, rgba(56, 189, 248, 0.1), rgba(99, 102, 241, 0.1))",
-                            border: "1px solid rgba(56, 189, 248, 0.3)",
+                            position: 'fixed',
+                            top: 20,
+                            right: 20,
+                            zIndex: 1000,
+                            background: 'rgba(15, 23, 42, 0.95)',
+                            border: `2px solid ${isLoading ? '#F59E0B' : isHigh ? '#10B981' : isLow ? '#F59E0B' : '#38BDF8'}`,
                             borderRadius: 12,
-                            padding: "16px 20px",
-                            margin: "0 auto 20px",
-                            maxWidth: "100%",
-                            textAlign: "center"
+                            padding: '12px 16px',
+                            boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)',
+                            backdropFilter: 'blur(8px)',
+                            transition: 'all 0.3s ease',
+                            minWidth: '120px'
                         }}>
-                            <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 12 }}>
-                                <div style={{
-                                    width: 40,
-                                    height: 40,
-                                    borderRadius: "50%",
-                                    background: "rgba(56, 189, 248, 0.2)",
-                                    display: "flex",
-                                    alignItems: "center",
-                                    justifyContent: "center",
-                                    fontSize: "1.2rem"
-                                }}>
-                                    ­ƒöÉ
-                                </div>
-                                <div style={{ flex: 1, textAlign: "left" }}>
-                                    <div style={{ color: "#38BDF8", fontSize: "0.9rem", fontWeight: 700, marginBottom: 2 }}>
-                                        Fa├ºa login para salvar suas an├ílises
-                                    </div>
-                                    <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
-                                        Acesse seu hist├│rico e acompanhe suas otimiza├º├Áes
-                                    </div>
-                                </div>
-                                <button
-                                    type="button"
-                                    onClick={() => setShowAuthModal(true)}
-                                    data-cy="login-button"
-                                    style={{
-                                        background: "linear-gradient(135deg, #38BDF8, #6366F1)",
-                                        color: "#fff",
-                                        border: "none",
-                                        borderRadius: 6,
-                                        padding: "8px 16px",
-                                        fontSize: "0.8rem",
-                                        fontWeight: 600,
-                                        cursor: "pointer",
-                                        transition: "all 0.2s"
-                                    }}
-                                    onMouseEnter={(e) => {
-                                        e.currentTarget.style.transform = "translateY(-2px)";
-                                        e.currentTarget.style.boxShadow = "0 4px 12px rgba(56, 189, 248, 0.3)";
-                                    }}
-                                    onMouseLeave={(e) => {
-                                        e.currentTarget.style.transform = "translateY(0)";
-                                        e.currentTarget.style.boxShadow = "none";
-                                    }}
-                                >
-                                    Entrar
-                                </button>
+                            <div style={{
+                                color: '#94A3B8',
+                                fontSize: '0.7rem',
+                                fontWeight: 600,
+                                textTransform: 'uppercase',
+                                letterSpacing: 1,
+                                marginBottom: 2
+                            }}>
+                                {isLoading ? 'Carregando...' : 'Cr├®ditos'}
                             </div>
-                        </div>
-                    )}
-
-                    {/* UI de Erro Premium (tamb├®m aparece no hero) */}
-                    {premiumError && (
-                        <div style={{
-                            background: "rgba(239, 68, 68, 0.1)",
-                            border: "2px solid #EF4444",
-                            borderRadius: 12,
-                            padding: "20px",
-                            margin: "0 auto 20px",
-                            maxWidth: "100%",
-                            textAlign: "center"
-                        }}>
-                            <div style={{ fontSize: "2rem", marginBottom: "12px" }}>ÔÜá´©Å</div>
-                            <div style={{ color: "#EF4444", fontSize: "1.1rem", fontWeight: 700, marginBottom: "8px" }}>
-                                {premiumError}
+                            <div style={{
+                                color: isLoading ? '#F59E0B' : isHigh ? '#10B981' : isLow ? '#F59E0B' : '#F8FAFC',
+                                fontSize: '1.2rem',
+                                fontWeight: 900,
+                                lineHeight: 1,
+                                fontFamily: 'monospace',
+                                display: 'flex',
+                                alignItems: 'center',
+                                gap: '4px'
+                            }}>
+                                {isLoading && (
+                                    <div style={{
+                                        width: '12px',
+                                        height: '12px',
+                                        border: '2px solid #F59E0B',
+                                        borderTop: '2px solid transparent',
+                                        borderRadius: '50%',
+                                        animation: 'spin 1s linear infinite'
+                                    }} />
+                                )}
+                                {!isLoading && creditsRemaining}
                             </div>
-                            <button
-                                type="button"
-                                onClick={() => setPremiumError("")}
-                                style={{
-                                    background: "none",
-                                    border: "1px solid rgba(239, 68, 68, 0.3)",
-                                    color: "#EF4444",
-                                    borderRadius: 6,
-                                    padding: "6px 12px",
-                                    fontSize: "0.8rem",
-                                    cursor: "pointer",
-                                    marginTop: "8px"
-                                }}
-                                onMouseEnter={(e) => {
-                                    e.currentTarget.style.background = "rgba(239, 68, 68, 0.1)";
-                                }}
-                                onMouseLeave={(e) => {
-                                    e.currentTarget.style.background = "none";
-                                }}
-                            >
-                                Entendido
-                            </button>
-                        </div>
-                    )}
-
-                    <div className="hero-container">
-                        <div dangerouslySetInnerHTML={{ __html: HERO_INNER_HTML }} />
-
-                        <div className="action-island-container">
-                            <div style={{ display: "flex", gap: "2rem", flexWrap: "wrap" }}>
-                                <div style={{ flex: "1 1 380px" }}>
-                                    <h5>1. VAGA ALVO ­ƒÄ»</h5>
-
-                                    {/* Op├º├úo para usar vaga gen├®rica */}
-                                    <div style={{ marginBottom: 12 }}>
-                                        <label style={{
-                                            display: "flex",
-                                            alignItems: "flex-start",
-                                            gap: 8,
-                                            cursor: "pointer",
-                                            fontSize: "0.9rem",
-                                            color: "#E2E8F0"
-                                        }}>
-                                            <input
-                                                type="checkbox"
-                                                checked={useGenericJob}
-                                                onChange={(e) => {
-                                                    setUseGenericJob(e.target.checked);
-                                                    if (e.target.checked) {
-                                                        // Define descri├º├úo gen├®rica quando marcado
-                                                        setJobDescription("Busco oportunidades profissionais que valorizem minhas habilidades e experi├¬ncia. Estou aberto a posi├º├Áes desafiadoras que permitam meu crescimento e contribui├º├úo para os objetivos da empresa, com foco em resultados e inova├º├úo.");
-                                                    } else {
-                                                        // Limpa quando desmarcado
-                                                        setJobDescription("");
-                                                        setSelectedArea("");
-                                                    }
+                            {!isLoading && creditsRemaining > 0 && (
+                                <div style={{ marginTop: '8px', borderTop: '1px solid rgba(255,255,255,0.1)', paddingTop: '8px' }}>
+                                    <button
+                                        onClick={openCustomerPortal}
+                                        style={{
+                                            background: 'rgba(139, 92, 246, 0.2)',
+                                            border: '1px solid #8B5CF6',
+                                            borderRadius: 6,
+                                            padding: '6px 12px',
+                                            color: '#8B5CF6',
+                                            fontSize: '0.7rem',
+                                            fontWeight: 600,
+                                            cursor: 'pointer',
+                                            transition: 'all 0.2s ease',
+                                            whiteSpace: 'nowrap',
+                                            width: '100%',
+                                            textAlign: 'center'
+                                        }}
+                                        onMouseEnter={(e) => {
+                                            e.currentTarget.style.background = 'rgba(139, 92, 246, 0.3)';
+                                            e.currentTarget.style.transform = 'scale(1.02)';
+                                        }}
+                                        onMouseLeave={(e) => {
+                                            e.currentTarget.style.background = 'rgba(139, 92, 246, 0.2)';
+                                            e.currentTarget.style.transform = 'scale(1)';
+                                        }}
+                                        title="Gerenciar assinatura, cancelar ou alterar plano"
+                                    >
+                                        ÔÜÖ´©Å Gerenciar
+                                    </button>
+                                </div>
+                            )}
+                            {!isLoading && (
+                                <div>
+                                    {creditsRemaining > 0 ? (
+                                        <>
+                                            <button
+                                                onClick={() => setStage("pricing")}
+                                                data-cy="see-plans-button"
+                                                style={{
+                                                    background: 'rgba(34, 197, 94, 0.2)',
+                                                    border: '1px solid #22C55E',
+                                                    borderRadius: 6,
+                                                    padding: '6px 12px',
+                                                    color: '#22C55E',
+                                                    fontSize: '0.75rem',
+                                                    fontWeight: 600,
+                                                    cursor: 'pointer',
+                                                    transition: 'all 0.2s ease',
+                                                    whiteSpace: 'nowrap',
+                                                    marginRight: '6px'
                                                 }}
-                                                style={{ marginTop: 2 }}
-                                            />
-                                            <span>
-                                                <strong>N├úo tenho uma vaga espec├¡fica</strong> -
-                                                Analisar meu CV contra o mercado geral
-                                            </span>
-                                        </label>
-                                    </div>
-
-                                    {/* Sele├º├úo de ├írea de interesse (aparece quando vaga gen├®rica) */}
-                                    {useGenericJob && (
-                                        <div style={{ marginBottom: 12 }}>
-                                            <label style={{
-                                                display: "block",
-                                                marginBottom: 6,
-                                                fontSize: "0.85rem",
-                                                color: "#CBD5E1",
-                                                fontWeight: 500
-                                            }}>
-                                                ├ürea de interesse (opcional):
-                                            </label>
-                                            <select
-                                                value={selectedArea}
-                                                onChange={(e) => setSelectedArea(e.target.value)}
+                                                onMouseEnter={(e) => {
+                                                    e.currentTarget.style.background = 'rgba(34, 197, 94, 0.3)';
+                                                    e.currentTarget.style.transform = 'scale(1.05)';
+                                                }}
+                                                onMouseLeave={(e) => {
+                                                    e.currentTarget.style.background = 'rgba(34, 197, 94, 0.2)';
+                                                    e.currentTarget.style.transform = 'scale(1)';
+                                                }}
+                                                title="Ver planos dispon├¡veis"
+                                            >
+                                                Ver planos
+                                            </button>
+                                            <button
+                                                onClick={() => setStage("pricing")}
                                                 style={{
-                                                    width: "100%",
-                                                    padding: "8px 12px",
-                                                    backgroundColor: "#1E293B",
-                                                    border: "1px solid rgba(255, 255, 255, 0.1)",
-                                                    borderRadius: "6px",
-                                                    color: "#E2E8F0",
-                                                    fontSize: "0.9rem"
+                                                    background: 'rgba(59, 130, 246, 0.2)',
+                                                    border: '1px solid #3B82F6',
+                                                    borderRadius: 6,
+                                                    padding: '6px 12px',
+                                                    color: '#3B82F6',
+                                                    fontSize: '0.75rem',
+                                                    fontWeight: 600,
+                                                    cursor: 'pointer',
+                                                    transition: 'all 0.2s ease',
+                                                    whiteSpace: 'nowrap'
+                                                }}
+                                                onMouseEnter={(e) => {
+                                                    e.currentTarget.style.background = 'rgba(59, 130, 246, 0.3)';
+                                                    e.currentTarget.style.transform = 'scale(1.05)';
                                                 }}
+                                                onMouseLeave={(e) => {
+                                                    e.currentTarget.style.background = 'rgba(59, 130, 246, 0.2)';
+                                                    e.currentTarget.style.transform = 'scale(1)';
+                                                }}
+                                                title="Comprar mais cr├®ditos"
                                             >
-                                                <option value="">Selecione uma ├írea...</option>
-                                                <option value="ti_dados_ai">Tecnologia/Dados/IA</option>
-                                                <option value="ti_dev_gen">Desenvolvimento de Software</option>
-                                                <option value="ti_suporte">TI/Suporte T├®cnico</option>
-                                                <option value="produto_agil">Produto/Agile</option>
-                                                <option value="marketing_growth">Marketing/Growth</option>
-                                                <option value="vendas_cs">Vendas/Customer Success</option>
-                                                <option value="rh_lideranca">RH/Lideran├ºa</option>
-                                                <option value="financeiro_corp">Financeiro/Corporativo</option>
-                                                <option value="global_soft_skills">Geral/Soft Skills</option>
-                                            </select>
-                                            <div style={{
-                                                marginTop: 4,
-                                                fontSize: "0.75rem",
-                                                color: "#94A3B8"
-                                            }}>
-                                                ­ƒÆí Isso ajuda a personalizar a an├ílise para sua ├írea
-                                            </div>
-                                        </div>
-                                    )}
-
-                                    <div className="stTextArea">
-                                        <textarea
-                                            value={jobDescription}
-                                            onChange={(e) => setJobDescription(e.target.value)}
-                                            placeholder={useGenericJob
-                                                ? "Descri├º├úo gen├®rica carregada automaticamente..."
-                                                : "Cole aqui a descri├º├úo da vaga (T├¡tulo, Requisitos e Responsabilidades)..."
-                                            }
-                                            disabled={useGenericJob}
+                                                + Comprar
+                                            </button>
+                                        </>
+                                    ) : (
+                                        <button
+                                            onClick={() => setStage("pricing")}
                                             style={{
-                                                height: 185,
-                                                width: "100%",
-                                                boxSizing: "border-box",
-                                                opacity: useGenericJob ? 0.6 : 1,
-                                                backgroundColor: useGenericJob ? "#1E293B" : "transparent"
+                                                background: 'rgba(59, 130, 246, 0.2)',
+                                                border: '1px solid #3B82F6',
+                                                borderRadius: 6,
+                                                padding: '6px 12px',
+                                                color: '#3B82F6',
+                                                fontSize: '0.75rem',
+                                                fontWeight: 600,
+                                                cursor: 'pointer',
+                                                transition: 'all 0.2s ease',
+                                                whiteSpace: 'nowrap'
                                             }}
-                                        />
-                                    </div>
-                                    <div style={{
-                                        marginTop: 8,
-                                        display: "flex",
-                                        justifyContent: "space-between",
-                                        alignItems: "center",
-                                        color: jobDescription && jobDescription.length >= 500 ? "#10B981" : "#64748B",
-                                        fontSize: "0.8rem"
-                                    }}>
-                                        <span>Caracteres: {jobDescription ? jobDescription.length : 0}/5000</span>
-                                        <span style={{ color: "#94A3B8", fontSize: "0.75rem" }}>
-                                            ­ƒÆí {useGenericJob
-                                                ? "Usando descri├º├úo gen├®rica para an├ílise de mercado"
-                                                : "Cole a descri├º├úo completa para melhores resultados"
-                                            }
-                                        </span>
-                                    </div>
+                                            onMouseEnter={(e) => {
+                                                e.currentTarget.style.background = 'rgba(59, 130, 246, 0.3)';
+                                                e.currentTarget.style.transform = 'scale(1.05)';
+                                            }}
+                                            onMouseLeave={(e) => {
+                                                e.currentTarget.style.background = 'rgba(59, 130, 246, 0.2)';
+                                                e.currentTarget.style.transform = 'scale(1)';
+                                            }}
+                                            title="Comprar cr├®ditos"
+                                        >
+                                            + Comprar
+                                        </button>
+                                    )}
                                 </div>
+                            )}
+                        </div>
+                    );
+                };
 
-                                <div style={{ flex: "1 1 380px" }}>
-                                    <h5>2. SEU CV (PDF) ­ƒôä</h5>
-                                    {file ? (
-                                        <div style={{ background: "rgba(16, 185, 129, 0.1)", border: "1px solid #10B981", borderRadius: 8, padding: 16, textAlign: "center" }}>
-                                            <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 600, marginBottom: 4 }}>Ô£à Arquivo carregado</div>
-                                            <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>{file.name}</div>
-
-                                            {/* Exibir metadados extra├¡dos */}
-                                            {pdfMetadata && (
-                                                <div style={{
-                                                    background: "rgba(245, 158, 11, 0.08)",
-                                                    border: "1px solid rgba(245, 158, 11, 0.25)",
-                                                    borderRadius: 6,
-                                                    padding: 10,
-                                                    marginTop: 8
-                                                }}>
-                                                    <div style={{ color: "#F59E0B", fontSize: "0.75rem", fontWeight: 700, marginBottom: 4 }}>
-                                                        ­ƒôè DETALHES DETECTADOS:
-                                                    </div>
-                                                    {pdfMetadata.pages && (
-                                                        <div style={{ color: "#E2E8F0", fontSize: "0.85rem", marginBottom: 2 }}>
-                                                            <strong>P├íginas:</strong> {pdfMetadata.pages}
-                                                            {pdfMetadata.pages > 3 && <span style={{ marginLeft: 6, color: "#10B981" }}>- Vamos otimizar para 1-2 p├íginas ideais Ô£ô</span>}
-                                                        </div>
-                                                    )}
-                                                </div>
-                                            )}
-
-                                            <button type="button" onClick={() => setFile(null)} style={{ marginTop: 12, fontSize: "0.75rem", color: "#94A3B8", background: "none", border: "none", cursor: "pointer", textDecoration: "underline" }}>
-                                                Remover
-                                            </button>
-                                        </div>
-                                    ) : (
-                                        <div data-testid="stFileUploader" data-cy="cv-upload-area">
-                                            <section
-                                                onClick={openFileDialog}
-                                                data-cy="cv-upload-section"
-                                                onKeyDown={(e) => {
-                                                    if (e.key === 'Enter' || e.key === ' ') {
-                                                        e.preventDefault();
-                                                        openFileDialog();
-                                                    }
-                                                }}
-                                                style={{ cursor: "pointer" }}
-                                                tabIndex={0}
-                                            >
-                                                <div>
-                                                    <div>
-                                                        <span>Arraste aqui ou clique para selecionar</span>
-                                                    </div>
-                                                    <small>Ô£ô PDF ou DOCX ÔÇó M├íx. 10MB</small>
-                                                    <button
-                                                        type="button"
-                                                        onClick={openFileDialog}
-                                                        style={{ marginTop: "8px", fontSize: "0.8rem", opacity: 0.7 }}
-                                                    >Selecionar Arquivo</button>
-                                                    <input
-                                                        ref={uploaderInputRef}
-                                                        type="file"
-                                                        accept="application/pdf"
-                                                        data-cy="cv-file-input"
-                                                        style={{ display: "none" }}
-                                                        onChange={(e) => setFile(e.target.files?.[0] ?? null)}
-                                                    />
-                                                </div>
-                                            </section>
-                                        </div>
-                                    )}
+                if (loadingHistoryItem) {
+                    return (
+                        <main>
+                            <div style={{
+                                display: "flex",
+                                alignItems: "center",
+                                justifyContent: "center",
+                                minHeight: "100vh",
+                                background: "#0F172A",
+                                color: "#94A3B8",
+                                fontSize: "1rem",
+                                fontFamily: "'Outfit', sans-serif",
+                            }}>
+                                <div style={{ textAlign: "center" }}>
+                                    <style>{`@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }`}</style>
+                                    <div style={{
+                                        width: 36,
+                                        height: 36,
+                                        border: "3px solid rgba(56, 189, 248, 0.2)",
+                                        borderTop: "3px solid #38BDF8",
+                                        borderRadius: "50%",
+                                        animation: "spin 0.8s linear infinite",
+                                        margin: "0 auto 16px",
+                                    }} />
+                                    Carregando an├ílise...
                                 </div>
+                            </div>
+                        </main>
+                    );
+                }
 
-                                <div style={{ height: 16 }} />
-
-                                {/* Toggle Top Performer - Agora vis├¡vel como vantagem */}
-                                <div style={{
-                                    background: "linear-gradient(135deg, rgba(245, 158, 11, 0.08), rgba(16, 185, 129, 0.05))",
-                                    border: "1px solid rgba(245, 158, 11, 0.25)",
-                                    borderRadius: 12,
-                                    padding: "16px 20px",
-                                    marginBottom: 16
-                                }}>
+                return (
+                    <main>
+                        {renderCreditsIndicator()}
+                        {stage === "hero" && (
+                            <>
+                                {/* Indicador de Status do Usu├írio */}
+                                {authUserId && (
                                     <div style={{
-                                        display: "flex",
-                                        alignItems: "center",
-                                        justifyContent: "space-between",
-                                        gap: 12,
-                                        marginBottom: competitorFiles.length > 0 ? 16 : 0
+                                        background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(56, 189, 248, 0.1))",
+                                        border: "1px solid rgba(16, 185, 129, 0.3)",
+                                        borderRadius: 12,
+                                        padding: "16px 20px",
+                                        margin: "0 auto 20px",
+                                        maxWidth: "100%",
+                                        textAlign: "center"
                                     }}>
-                                        <div style={{ display: "flex", alignItems: "center", gap: 12, flex: 1 }}>
-                                            <div style={{ fontSize: "1.8rem" }}>­ƒÄ»</div>
-                                            <div>
-                                                <div style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 700, letterSpacing: "0.3px" }}>
-                                                    Refer├¬ncia de Candidato Ideal <span style={{ color: "#94A3B8", fontSize: "0.75rem", fontWeight: 400 }}>(Opcional)</span>
+                                        <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 12 }}>
+                                            <div style={{
+                                                width: 40,
+                                                height: 40,
+                                                borderRadius: "50%",
+                                                background: "rgba(16, 185, 129, 0.2)",
+                                                display: "flex",
+                                                alignItems: "center",
+                                                justifyContent: "center",
+                                                fontSize: "1.2rem"
+                                            }}>
+                                                Ô£à
+                                            </div>
+                                            <div style={{ flex: 1, textAlign: "left" }}>
+                                                <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 700, marginBottom: 2 }}>
+                                                    Logado como {authEmail}
                                                 </div>
-                                                <div style={{ color: "#94A3B8", fontSize: "0.8rem", marginTop: 2 }}>
-                                                    {competitorFiles.length > 0
-                                                        ? `Usando ${competitorFiles.length} arquivo(s) de refer├¬ncia`
-                                                        : "Use nosso padr├úo de mercado automaticamente"
+                                                <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
+                                                    {creditsRemaining > 0
+                                                        ? `Voc├¬ tem ${creditsRemaining} cr├®dito(s) dispon├¡vel(is)`
+                                                        : "Pronto para analisar seu CV"
                                                     }
                                                 </div>
                                             </div>
+                                            <button
+                                                type="button"
+                                                onClick={async () => {
+                                                    if (supabase) {
+                                                        // Verifica├º├úo de tipo expl├¡cita para evitar never
+                                                        const client = supabase as SupabaseClient;
+
+                                                        await client.auth.signOut();
+                                                    }
+                                                }}
+                                                style={{
+                                                    background: "none",
+                                                    border: "1px solid rgba(239, 68, 68, 0.3)",
+                                                    color: "#EF4444",
+                                                    borderRadius: 6,
+                                                    padding: "6px 12px",
+                                                    fontSize: "0.75rem",
+                                                    cursor: "pointer",
+                                                    transition: "all 0.2s"
+                                                }}
+                                                onMouseEnter={(e) => {
+                                                    e.currentTarget.style.background = "rgba(239, 68, 68, 0.1)";
+                                                }}
+                                                onMouseLeave={(e) => {
+                                                    e.currentTarget.style.background = "none";
+                                                }}
+                                            >
+                                                Sair
+                                            </button>
                                         </div>
-                                        {/* SUBSTITUA O C├ôDIGO DO BOT├âO (button) POR ESTA L├ôGICA CONDICIONAL: */}
+                                    </div>
+                                )}
 
-                                        {competitorFiles.length > 0 ? (
-                                            // ESTADO DE SUCESSO (Apenas visual/Label)
+                                {/* Bot├úo de Login para Usu├írios N├úo Logados */}
+                                {!authUserId && (
+                                    <div style={{
+                                        background: "linear-gradient(135deg, rgba(56, 189, 248, 0.1), rgba(99, 102, 241, 0.1))",
+                                        border: "1px solid rgba(56, 189, 248, 0.3)",
+                                        borderRadius: 12,
+                                        padding: "16px 20px",
+                                        margin: "0 auto 20px",
+                                        maxWidth: "100%",
+                                        textAlign: "center"
+                                    }}>
+                                        <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 12 }}>
                                             <div style={{
-                                                marginTop: 8,
+                                                width: 40,
+                                                height: 40,
+                                                borderRadius: "50%",
+                                                background: "rgba(56, 189, 248, 0.2)",
                                                 display: "flex",
                                                 alignItems: "center",
-                                                gap: 8,
-                                                color: "#10B981", // Verde sucesso
-                                                fontWeight: 700,
-                                                fontSize: "0.9rem",
-                                                padding: "8px 0" // Espa├ºamento leve
+                                                justifyContent: "center",
+                                                fontSize: "1.2rem"
                                             }}>
-                                                <div style={{
-                                                    width: 24,
-                                                    height: 24,
-                                                    borderRadius: "50%",
-                                                    background: "rgba(16, 185, 129, 0.2)", // Fundo circular sutil
-                                                    display: "flex",
-                                                    alignItems: "center",
-                                                    justifyContent: "center",
-                                                    fontSize: "0.8rem"
-                                                }}>
-                                                    Ô£ô
+                                                ­ƒöÉ
+                                            </div>
+                                            <div style={{ flex: 1, textAlign: "left" }}>
+                                                <div style={{ color: "#38BDF8", fontSize: "0.9rem", fontWeight: 700, marginBottom: 2 }}>
+                                                    Fa├ºa login para salvar suas an├ílises
+                                                </div>
+                                                <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
+                                                    Acesse seu hist├│rico e acompanhe suas otimiza├º├Áes
                                                 </div>
-                                                Pronto para an├ílise
                                             </div>
-                                        ) : (
-                                            // ESTADO PADR├âO (Bot├úo de Adicionar)
                                             <button
                                                 type="button"
-                                                onClick={openCompetitorFileDialog}
+                                                onClick={() => setShowAuthModal(true)}
+                                                data-cy="login-button"
                                                 style={{
-                                                    background: "transparent",
-                                                    color: "#94A3B8",
-                                                    border: "1px solid rgba(148, 163, 184, 0.4)",
-                                                    borderRadius: 20,
+                                                    background: "linear-gradient(135deg, #38BDF8, #6366F1)",
+                                                    color: "#fff",
+                                                    border: "none",
+                                                    borderRadius: 6,
                                                     padding: "8px 16px",
                                                     fontSize: "0.8rem",
                                                     fontWeight: 600,
                                                     cursor: "pointer",
-                                                    display: "flex",
-                                                    alignItems: "center",
-                                                    justifyContent: "center",
-                                                    gap: 6,
-                                                    whiteSpace: "nowrap",
-                                                    transition: "all 0.2s ease"
+                                                    transition: "all 0.2s"
                                                 }}
                                                 onMouseEnter={(e) => {
-                                                    e.currentTarget.style.borderColor = "#10B981";
-                                                    e.currentTarget.style.color = "#10B981";
+                                                    e.currentTarget.style.transform = "translateY(-2px)";
+                                                    e.currentTarget.style.boxShadow = "0 4px 12px rgba(56, 189, 248, 0.3)";
                                                 }}
                                                 onMouseLeave={(e) => {
-                                                    e.currentTarget.style.borderColor = "rgba(148, 163, 184, 0.4)";
-                                                    e.currentTarget.style.color = "#94A3B8";
+                                                    e.currentTarget.style.transform = "translateY(0)";
+                                                    e.currentTarget.style.boxShadow = "none";
                                                 }}
                                             >
-                                                + ADICIONAR CV DE REFER├èNCIA
+                                                Entrar
                                             </button>
-                                        )}
+                                        </div>
+                                    </div>
+                                )}
 
-                                        {/* Input invis├¡vel continua aqui */}
-                                        <input
-                                            ref={competitorUploaderInputRef}
-                                            type="file"
-                                            accept="application/pdf"
-                                            multiple
-                                            style={{ display: "none" }}
-                                            onChange={(e) => setCompetitorFiles(Array.from(e.target.files ?? []))}
-                                        />
+                                {/* UI de Erro Premium (tamb├®m aparece no hero) */}
+                                {premiumError && (
+                                    <div style={{
+                                        background: "rgba(239, 68, 68, 0.1)",
+                                        border: "2px solid #EF4444",
+                                        borderRadius: 12,
+                                        padding: "20px",
+                                        margin: "0 auto 20px",
+                                        maxWidth: "100%",
+                                        textAlign: "center"
+                                    }}>
+                                        <div style={{ fontSize: "2rem", marginBottom: "12px" }}>ÔÜá´©Å</div>
+                                        <div style={{ color: "#EF4444", fontSize: "1.1rem", fontWeight: 700, marginBottom: "8px" }}>
+                                            {premiumError}
+                                        </div>
+                                        <button
+                                            type="button"
+                                            onClick={() => setPremiumError("")}
+                                            style={{
+                                                background: "none",
+                                                border: "1px solid rgba(239, 68, 68, 0.3)",
+                                                color: "#EF4444",
+                                                borderRadius: 6,
+                                                padding: "6px 12px",
+                                                fontSize: "0.8rem",
+                                                cursor: "pointer",
+                                                marginTop: "8px"
+                                            }}
+                                            onMouseEnter={(e) => {
+                                                e.currentTarget.style.background = "rgba(239, 68, 68, 0.1)";
+                                            }}
+                                            onMouseLeave={(e) => {
+                                                e.currentTarget.style.background = "none";
+                                            }}
+                                        >
+                                            Entendido
+                                        </button>
                                     </div>
+                                )}
 
-                                    {competitorFiles.length > 0 && (
+                                <div className="hero-container">
+                                    <div dangerouslySetInnerHTML={{ __html: HERO_INNER_HTML }} />
+
+                                    <div className="action-island-container">
+                                        <div style={{ display: "flex", gap: "2rem", flexWrap: "wrap" }}>
+                                            <div style={{ flex: "1 1 380px" }}>
+                                                <h5>1. VAGA ALVO ­ƒÄ»</h5>
+
+                                                {/* Op├º├úo para usar vaga gen├®rica */}
+                                                <div style={{ marginBottom: 12 }}>
+                                                    <label style={{
+                                                        display: "flex",
+                                                        alignItems: "flex-start",
+                                                        gap: 8,
+                                                        cursor: "pointer",
+                                                        fontSize: "0.9rem",
+                                                        color: "#E2E8F0"
+                                                    }}>
+                                                        <input
+                                                            type="checkbox"
+                                                            checked={useGenericJob}
+                                                            onChange={(e) => {
+                                                                setUseGenericJob(e.target.checked);
+                                                                if (e.target.checked) {
+                                                                    // Define descri├º├úo gen├®rica quando marcado
+                                                                    setJobDescription("Busco oportunidades profissionais que valorizem minhas habilidades e experi├¬ncia. Estou aberto a posi├º├Áes desafiadoras que permitam meu crescimento e contribui├º├úo para os objetivos da empresa, com foco em resultados e inova├º├úo.");
+                                                                } else {
+                                                                    // Limpa quando desmarcado
+                                                                    setJobDescription("");
+                                                                    setSelectedArea("");
+                                                                }
+                                                            }}
+                                                            style={{ marginTop: 2 }}
+                                                        />
+                                                        <span>
+                                                            <strong>N├úo tenho uma vaga espec├¡fica</strong> -
+                                                            Analisar meu CV contra o mercado geral
+                                                        </span>
+                                                    </label>
+                                                </div>
+
+                                                {/* Sele├º├úo de ├írea de interesse (aparece quando vaga gen├®rica) */}
+                                                {useGenericJob && (
+                                                    <div style={{ marginBottom: 12 }}>
+                                                        <label style={{
+                                                            display: "block",
+                                                            marginBottom: 6,
+                                                            fontSize: "0.85rem",
+                                                            color: "#CBD5E1",
+                                                            fontWeight: 500
+                                                        }}>
+                                                            ├ürea de interesse (opcional):
+                                                        </label>
+                                                        <select
+                                                            value={selectedArea}
+                                                            onChange={(e) => setSelectedArea(e.target.value)}
+                                                            style={{
+                                                                width: "100%",
+                                                                padding: "8px 12px",
+                                                                backgroundColor: "#1E293B",
+                                                                border: "1px solid rgba(255, 255, 255, 0.1)",
+                                                                borderRadius: "6px",
+                                                                color: "#E2E8F0",
+                                                                fontSize: "0.9rem"
+                                                            }}
+                                                        >
+                                                            <option value="">Selecione uma ├írea...</option>
+                                                            <option value="ti_dados_ai">Tecnologia/Dados/IA</option>
+                                                            <option value="ti_dev_gen">Desenvolvimento de Software</option>
+                                                            <option value="ti_suporte">TI/Suporte T├®cnico</option>
+                                                            <option value="produto_agil">Produto/Agile</option>
+                                                            <option value="marketing_growth">Marketing/Growth</option>
+                                                            <option value="vendas_cs">Vendas/Customer Success</option>
+                                                            <option value="rh_lideranca">RH/Lideran├ºa</option>
+                                                            <option value="financeiro_corp">Financeiro/Corporativo</option>
+                                                            <option value="global_soft_skills">Geral/Soft Skills</option>
+                                                        </select>
+                                                        <div style={{
+                                                            marginTop: 4,
+                                                            fontSize: "0.75rem",
+                                                            color: "#94A3B8"
+                                                        }}>
+                                                            ­ƒÆí Isso ajuda a personalizar a an├ílise para sua ├írea
+                                                        </div>
+                                                    </div>
+                                                )}
+
+                                                <div className="stTextArea">
+                                                    <textarea
+                                                        value={jobDescription}
+                                                        onChange={(e) => setJobDescription(e.target.value)}
+                                                        placeholder={useGenericJob
+                                                            ? "Descri├º├úo gen├®rica carregada automaticamente..."
+                                                            : "Cole aqui a descri├º├úo da vaga (T├¡tulo, Requisitos e Responsabilidades)..."
+                                                        }
+                                                        disabled={useGenericJob}
+                                                        style={{
+                                                            height: 185,
+                                                            width: "100%",
+                                                            boxSizing: "border-box",
+                                                            opacity: useGenericJob ? 0.6 : 1,
+                                                            backgroundColor: useGenericJob ? "#1E293B" : "transparent"
+                                                        }}
+                                                    />
+                                                </div>
+                                                <div style={{
+                                                    marginTop: 8,
+                                                    display: "flex",
+                                                    justifyContent: "space-between",
+                                                    alignItems: "center",
+                                                    color: jobDescription && jobDescription.length >= 500 ? "#10B981" : "#64748B",
+                                                    fontSize: "0.8rem"
+                                                }}>
+                                                    <span>Caracteres: {jobDescription ? jobDescription.length : 0}/5000</span>
+                                                    <span style={{ color: "#94A3B8", fontSize: "0.75rem" }}>
+                                                        ­ƒÆí {useGenericJob
+                                                            ? "Usando descri├º├úo gen├®rica para an├ílise de mercado"
+                                                            : "Cole a descri├º├úo completa para melhores resultados"
+                                                        }
+                                                    </span>
+                                                </div>
+                                            </div>
+
+                                            <div style={{ flex: "1 1 380px" }}>
+                                                <h5>2. SEU CV (PDF) ­ƒôä</h5>
+                                                {file ? (
+                                                    <div style={{ background: "rgba(16, 185, 129, 0.1)", border: "1px solid #10B981", borderRadius: 8, padding: 16, textAlign: "center" }}>
+                                                        <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 600, marginBottom: 4 }}>Ô£à Arquivo carregado</div>
+                                                        <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>{file.name}</div>
+
+                                                        {/* Exibir metadados extra├¡dos */}
+                                                        {pdfMetadata && (
+                                                            <div style={{
+                                                                background: "rgba(245, 158, 11, 0.08)",
+                                                                border: "1px solid rgba(245, 158, 11, 0.25)",
+                                                                borderRadius: 6,
+                                                                padding: 10,
+                                                                marginTop: 8
+                                                            }}>
+                                                                <div style={{ color: "#F59E0B", fontSize: "0.75rem", fontWeight: 700, marginBottom: 4 }}>
+                                                                    ­ƒôè DETALHES DETECTADOS:
+                                                                </div>
+                                                                {pdfMetadata.pages && (
+                                                                    <div style={{ color: "#E2E8F0", fontSize: "0.85rem", marginBottom: 2 }}>
+                                                                        <strong>P├íginas:</strong> {pdfMetadata.pages}
+                                                                        {pdfMetadata.pages > 3 && <span style={{ marginLeft: 6, color: "#10B981" }}>- Vamos otimizar para 1-2 p├íginas ideais Ô£ô</span>}
+                                                                    </div>
+                                                                )}
+                                                            </div>
+                                                        )}
+
+                                                        <button type="button" onClick={() => setFile(null)} style={{ marginTop: 12, fontSize: "0.75rem", color: "#94A3B8", background: "none", border: "none", cursor: "pointer", textDecoration: "underline" }}>
+                                                            Remover
+                                                        </button>
+                                                    </div>
+                                                ) : (
+                                                    <div data-testid="stFileUploader" data-cy="cv-upload-area">
+                                                        <section
+                                                            onClick={openFileDialog}
+                                                            data-cy="cv-upload-section"
+                                                            onKeyDown={(e) => {
+                                                                if (e.key === 'Enter' || e.key === ' ') {
+                                                                    e.preventDefault();
+                                                                    openFileDialog();
+                                                                }
+                                                            }}
+                                                            style={{ cursor: "pointer" }}
+                                                            tabIndex={0}
+                                                        >
+                                                            <div>
+                                                                <div>
+                                                                    <span>Arraste aqui ou clique para selecionar</span>
+                                                                </div>
+                                                                <small>Ô£ô PDF ou DOCX ÔÇó M├íx. 10MB</small>
+                                                                <button
+                                                                    type="button"
+                                                                    onClick={openFileDialog}
+                                                                    style={{ marginTop: "8px", fontSize: "0.8rem", opacity: 0.7 }}
+                                                                >Selecionar Arquivo</button>
+                                                                <input
+                                                                    ref={uploaderInputRef}
+                                                                    type="file"
+                                                                    accept="application/pdf"
+                                                                    data-cy="cv-file-input"
+                                                                    style={{ display: "none" }}
+                                                                    onChange={(e) => setFile(e.target.files?.[0] ?? null)}
+                                                                />
+                                                            </div>
+                                                        </section>
+                                                    </div>
+                                                )}
+                                            </div>
+
+                                        </div>
+
+                                        <div style={{ height: 16 }} />
+
+                                        {/* Toggle Top Performer - Agora vis├¡vel como vantagem */}
                                         <div style={{
-                                            background: "rgba(16, 185, 129, 0.1)",
-                                            border: "1px solid rgba(16, 185, 129, 0.3)",
-                                            borderRadius: 8,
-                                            padding: 12,
-                                            marginTop: 12
+                                            background: "linear-gradient(135deg, rgba(245, 158, 11, 0.08), rgba(16, 185, 129, 0.05))",
+                                            border: "1px solid rgba(245, 158, 11, 0.25)",
+                                            borderRadius: 12,
+                                            padding: "16px 20px",
+                                            marginBottom: 16
                                         }}>
-                                            <div style={{ color: "#10B981", fontSize: "0.85rem", fontWeight: 600, marginBottom: 8 }}>
-                                                Ô£à Refer├¬ncia carregada
+                                            <div style={{
+                                                display: "flex",
+                                                alignItems: "center",
+                                                justifyContent: "space-between",
+                                                gap: 12,
+                                                marginBottom: competitorFiles.length > 0 ? 16 : 0
+                                            }}>
+                                                <div style={{ display: "flex", alignItems: "center", gap: 12, flex: 1 }}>
+                                                    <div style={{ fontSize: "1.8rem" }}>­ƒÄ»</div>
+                                                    <div>
+                                                        <div style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 700, letterSpacing: "0.3px" }}>
+                                                            Refer├¬ncia de Candidato Ideal <span style={{ color: "#94A3B8", fontSize: "0.75rem", fontWeight: 400 }}>(Opcional)</span>
+                                                        </div>
+                                                        <div style={{ color: "#94A3B8", fontSize: "0.8rem", marginTop: 2 }}>
+                                                            {competitorFiles.length > 0
+                                                                ? `Usando ${competitorFiles.length} arquivo(s) de refer├¬ncia`
+                                                                : "Use nosso padr├úo de mercado automaticamente"
+                                                            }
+                                                        </div>
+                                                    </div>
+                                                </div>
+                                                {/* SUBSTITUA O C├ôDIGO DO BOT├âO (button) POR ESTA L├ôGICA CONDICIONAL: */}
+
+                                                {competitorFiles.length > 0 ? (
+                                                    // ESTADO DE SUCESSO (Apenas visual/Label)
+                                                    <div style={{
+                                                        marginTop: 8,
+                                                        display: "flex",
+                                                        alignItems: "center",
+                                                        gap: 8,
+                                                        color: "#10B981", // Verde sucesso
+                                                        fontWeight: 700,
+                                                        fontSize: "0.9rem",
+                                                        padding: "8px 0" // Espa├ºamento leve
+                                                    }}>
+                                                        <div style={{
+                                                            width: 24,
+                                                            height: 24,
+                                                            borderRadius: "50%",
+                                                            background: "rgba(16, 185, 129, 0.2)", // Fundo circular sutil
+                                                            display: "flex",
+                                                            alignItems: "center",
+                                                            justifyContent: "center",
+                                                            fontSize: "0.8rem"
+                                                        }}>
+                                                            Ô£ô
+                                                        </div>
+                                                        Pronto para an├ílise
+                                                    </div>
+                                                ) : (
+                                                    // ESTADO PADR├âO (Bot├úo de Adicionar)
+                                                    <button
+                                                        type="button"
+                                                        onClick={openCompetitorFileDialog}
+                                                        style={{
+                                                            background: "transparent",
+                                                            color: "#94A3B8",
+                                                            border: "1px solid rgba(148, 163, 184, 0.4)",
+                                                            borderRadius: 20,
+                                                            padding: "8px 16px",
+                                                            fontSize: "0.8rem",
+                                                            fontWeight: 600,
+                                                            cursor: "pointer",
+                                                            display: "flex",
+                                                            alignItems: "center",
+                                                            justifyContent: "center",
+                                                            gap: 6,
+                                                            whiteSpace: "nowrap",
+                                                            transition: "all 0.2s ease"
+                                                        }}
+                                                        onMouseEnter={(e) => {
+                                                            e.currentTarget.style.borderColor = "#10B981";
+                                                            e.currentTarget.style.color = "#10B981";
+                                                        }}
+                                                        onMouseLeave={(e) => {
+                                                            e.currentTarget.style.borderColor = "rgba(148, 163, 184, 0.4)";
+                                                            e.currentTarget.style.color = "#94A3B8";
+                                                        }}
+                                                    >
+                                                        + ADICIONAR CV DE REFER├èNCIA
+                                                    </button>
+                                                )}
+
+                                                {/* Input invis├¡vel continua aqui */}
+                                                <input
+                                                    ref={competitorUploaderInputRef}
+                                                    type="file"
+                                                    accept="application/pdf"
+                                                    multiple
+                                                    style={{ display: "none" }}
+                                                    onChange={(e) => setCompetitorFiles(Array.from(e.target.files ?? []))}
+                                                />
                                             </div>
-                                            <div style={{ color: "#E2E8F0", fontSize: "0.8rem" }}>
-                                                {competitorFiles.map((f, i) => (
-                                                    <div key={i} style={{ marginBottom: 4, display: "flex", alignItems: "center", gap: 8 }}>
-                                                        <span style={{ color: "#64748B" }}>­ƒôä</span>
-                                                        {f.name}
+
+                                            {competitorFiles.length > 0 && (
+                                                <div style={{
+                                                    background: "rgba(16, 185, 129, 0.1)",
+                                                    border: "1px solid rgba(16, 185, 129, 0.3)",
+                                                    borderRadius: 8,
+                                                    padding: 12,
+                                                    marginTop: 12
+                                                }}>
+                                                    <div style={{ color: "#10B981", fontSize: "0.85rem", fontWeight: 600, marginBottom: 8 }}>
+                                                        Ô£à Refer├¬ncia carregada
+                                                    </div>
+                                                    <div style={{ color: "#E2E8F0", fontSize: "0.8rem" }}>
+                                                        {competitorFiles.map((f, i) => (
+                                                            <div key={i} style={{ marginBottom: 4, display: "flex", alignItems: "center", gap: 8 }}>
+                                                                <span style={{ color: "#64748B" }}>­ƒôä</span>
+                                                                {f.name}
+                                                            </div>
+                                                        ))}
                                                     </div>
-                                                ))}
+                                                    <button
+                                                        type="button"
+                                                        onClick={() => setCompetitorFiles([])}
+                                                        style={{
+                                                            marginTop: 8,
+                                                            fontSize: "0.75rem",
+                                                            color: "#94A3B8",
+                                                            background: "none",
+                                                            border: "none",
+                                                            cursor: "pointer",
+                                                            textDecoration: "underline"
+                                                        }}
+                                                    >
+                                                        Remover e usar padr├úo autom├ítico
+                                                    </button>
+                                                </div>
+                                            )}
+
+                                            {competitorFiles.length === 0 && (
+                                                <div style={{
+                                                    marginTop: 12,
+                                                    padding: "10px 12px",
+                                                    background: "rgba(15, 23, 42, 0.4)",
+                                                    borderRadius: 6,
+                                                    border: "1px dashed rgba(148, 163, 184, 0.2)"
+                                                }}>
+                                                    <p style={{
+                                                        color: "#94A3B8",
+                                                        fontSize: "0.8rem",
+                                                        margin: 0,
+                                                        lineHeight: 1.5
+                                                    }}>
+                                                        ­ƒÆí <strong style={{ color: "#E2E8F0" }}>B├┤nus inclu├¡do:</strong> Nossa IA aplicar├í automaticamente os padr├Áes de quem foi contratado nessa ├írea.
+                                                        Quer calibrar com um perfil espec├¡fico? Clique no bot├úo acima.
+                                                    </p>
+                                                </div>
+                                            )}
+                                        </div>
+                                        {authUserId && creditsRemaining > 0 && (
+                                            <div style={{
+                                                background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(56, 189, 248, 0.1))",
+                                                border: "1px solid rgba(16, 185, 129, 0.3)",
+                                                borderRadius: 8,
+                                                padding: "12px",
+                                                marginBottom: 16,
+                                                textAlign: "center"
+                                            }}>
+                                                <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 700, marginBottom: 4 }}>
+                                                    Ô£à Voc├¬ tem {creditsRemaining} cr├®dito(s) dispon├¡vel(is)!
+                                                </div>
+                                                <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
+                                                    Clique abaixo para usar seu cr├®dito e receber an├ílise completa
+                                                </div>
                                             </div>
+                                        )}
+                                        <div data-testid="stButton" className="stButton" style={{ width: "100%" }}>
                                             <button
                                                 type="button"
-                                                onClick={() => setCompetitorFiles([])}
+                                                data-kind="primary"
+                                                data-cy="main-cta"
+                                                onClick={onStart}
                                                 style={{
-                                                    marginTop: 8,
-                                                    fontSize: "0.75rem",
-                                                    color: "#94A3B8",
-                                                    background: "none",
-                                                    border: "none",
+                                                    width: "100%",
+                                                    transition: "all 0.2s ease",
                                                     cursor: "pointer",
-                                                    textDecoration: "underline"
+                                                    background: "linear-gradient(to bottom, #FFD54F 0%, #FF8F00 50%, #EF6C00 100%)",
+                                                    boxShadow: "inset 0 2px 1px rgba(255, 255, 255, 0.6), 0 4px 20px rgba(255, 143, 0, 0.5), 0 2px 5px rgba(255, 87, 34, 0.4)",
+                                                    fontWeight: 600,
+                                                    letterSpacing: "1px",
+                                                    color: "#210B00",
+                                                    border: "none",
+                                                    borderRadius: "50px",
+                                                    padding: "12px 20px",
+                                                    fontSize: "1rem"
+                                                }}
+                                                onMouseEnter={(e) => {
+                                                    e.currentTarget.style.transform = "translateY(-2px)";
+                                                    e.currentTarget.style.boxShadow = "inset 0 2px 1px rgba(255, 255, 255, 0.6), 0 8px 30px rgba(255, 143, 0, 0.7), 0 4px 10px rgba(255, 87, 34, 0.6)";
+                                                }}
+                                                onMouseLeave={(e) => {
+                                                    e.currentTarget.style.transform = "translateY(0)";
+                                                    e.currentTarget.style.boxShadow = "inset 0 2px 1px rgba(255, 255, 255, 0.6), 0 4px 20px rgba(255, 143, 0, 0.5), 0 2px 5px rgba(255, 87, 34, 0.4)";
+                                                }}
+                                                onMouseDown={(e) => {
+                                                    e.currentTarget.style.transform = "scale(0.98)";
+                                                }}
+                                                onMouseUp={(e) => {
+                                                    e.currentTarget.style.transform = "translateY(-2px)";
                                                 }}
                                             >
-                                                Remover e usar padr├úo autom├ítico
+                                                {authUserId && creditsRemaining > 0 ? "­ƒÜÇ USAR MEU CR├ëDITO E OTIMIZAR CV" : "VER MEU SCORE ATS GR├üTIS"}
                                             </button>
                                         </div>
-                                    )}
-
-                                    {competitorFiles.length === 0 && (
-                                        <div style={{
-                                            marginTop: 12,
-                                            padding: "10px 12px",
-                                            background: "rgba(15, 23, 42, 0.4)",
-                                            borderRadius: 6,
-                                            border: "1px dashed rgba(148, 163, 184, 0.2)"
-                                        }}>
-                                            <p style={{
-                                                color: "#94A3B8",
-                                                fontSize: "0.8rem",
-                                                margin: 0,
-                                                lineHeight: 1.5
-                                            }}>
-                                                ­ƒÆí <strong style={{ color: "#E2E8F0" }}>B├┤nus inclu├¡do:</strong> Nossa IA aplicar├í automaticamente os padr├Áes de quem foi contratado nessa ├írea.
-                                                Quer calibrar com um perfil espec├¡fico? Clique no bot├úo acima.
-                                            </p>
-                                        </div>
-                                    )}
+                                    </div>
                                 </div>
-                                {authUserId && creditsRemaining > 0 && (
-                                    <div style={{
-                                        background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(56, 189, 248, 0.1))",
-                                        border: "1px solid rgba(16, 185, 129, 0.3)",
-                                        borderRadius: 8,
-                                        padding: "12px",
-                                        marginBottom: 16,
-                                        textAlign: "center"
-                                    }}>
-                                        <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 700, marginBottom: 4 }}>
-                                            Ô£à Voc├¬ tem {creditsRemaining} cr├®dito(s) dispon├¡vel(is)!
-                                        </div>
-                                        <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
-                                            Clique abaixo para usar seu cr├®dito e receber an├ílise completa
-                                        </div>
+                            </>
+
+                        )
+                        }
+
+                        {
+                            stage === "paid" && (
+                                <PaidStage
+                                    reportData={reportData}
+                                    authUserId={authUserId}
+                                    onNewOptimization={() => setStage("hero")}
+                                    onUpdateReport={(updated) => setReportData(updated)}
+                                    onViewHistory={() => setStage("history")}
+                                />
+                            )
+                        }
+
+                        {
+                            stage === "history" && (
+                                <HistoryStage
+                                    authUserId={authUserId}
+                                    onSelectHistory={handleSelectHistory}
+                                    onBack={handleBackFromHistory}
+                                />
+                            )
+                        }
+
+                        {
+                            stage === "pricing" && (
+                                <div className="hero-container">
+                                    <div className="action-island-container">
+                                        <NeonOffer
+                                            onSelectPlan={(planId) => setSelectedPlan(planId)}
+                                            onCheckout={(planId) => {
+                                                setSelectedPlan(planId);
+                                                if (!authUserId) setShowAuthModal(true);
+                                                else setStage("checkout");
+                                            }}
+                                            authUserId={authUserId}
+                                            creditsRemaining={creditsRemaining}
+                                            timeRemaining={timeRemaining}
+                                            showHeader={true}
+                                        />
+                                    </div>
+                                    <div style={{ textAlign: "center", marginTop: 16 }}>
+                                        <button
+                                            type="button"
+                                            onClick={() => setStage("hero")}
+                                            style={{
+                                                background: "none",
+                                                border: "none",
+                                                color: "#475569",
+                                                fontSize: "0.85rem",
+                                                cursor: "pointer",
+                                                display: "inline-flex",
+                                                alignItems: "center",
+                                                justifyContent: "center",
+                                                gap: 6,
+                                                padding: "10px"
+                                            }}
+                                        >
+                                            ÔåÉ Voltar
+                                        </button>
                                     </div>
-                                )}
-                                <div data-testid="stButton" className="stButton" style={{ width: "100%" }}>
-                                    <button
-                                        type="button"
-                                        data-kind="primary"
-                                        data-cy="main-cta"
-                                        onClick={onStart}
-                                        style={{
-                                            width: "100%",
-                                            transition: "all 0.2s ease",
-                                            cursor: "pointer",
-                                            background: "linear-gradient(to bottom, #FFD54F 0%, #FF8F00 50%, #EF6C00 100%)",
-                                            boxShadow: "inset 0 2px 1px rgba(255, 255, 255, 0.6), 0 4px 20px rgba(255, 143, 0, 0.5), 0 2px 5px rgba(255, 87, 34, 0.4)",
-                                            fontWeight: 600,
-                                            letterSpacing: "1px",
-                                            color: "#210B00",
-                                            border: "none",
-                                            borderRadius: "50px",
-                                            padding: "12px 20px",
-                                            fontSize: "1rem"
-                                        }}
-                                        onMouseEnter={(e) => {
-                                            e.currentTarget.style.transform = "translateY(-2px)";
-                                            e.currentTarget.style.boxShadow = "inset 0 2px 1px rgba(255, 255, 255, 0.6), 0 8px 30px rgba(255, 143, 0, 0.7), 0 4px 10px rgba(255, 87, 34, 0.6)";
-                                        }}
-                                        onMouseLeave={(e) => {
-                                            e.currentTarget.style.transform = "translateY(0)";
-                                            e.currentTarget.style.boxShadow = "inset 0 2px 1px rgba(255, 255, 255, 0.6), 0 4px 20px rgba(255, 143, 0, 0.5), 0 2px 5px rgba(255, 87, 34, 0.4)";
-                                        }}
-                                        onMouseDown={(e) => {
-                                            e.currentTarget.style.transform = "scale(0.98)";
-                                        }}
-                                        onMouseUp={(e) => {
-                                            e.currentTarget.style.transform = "translateY(-2px)";
-                                        }}
-                                    >
-                                        {authUserId && creditsRemaining > 0 ? "­ƒÜÇ USAR MEU CR├ëDITO E OTIMIZAR CV" : "VER MEU SCORE ATS GR├üTIS"}
-                                    </button>
                                 </div>
-                            </div>
-                        </div>
-                    </div>
-                </>
-
-            )}
-
-            {stage === "paid" && (
-                <PaidStage
-                    reportData={reportData}
-                    authUserId={authUserId}
-                    onNewOptimization={() => setStage("hero")}
-                    onUpdateReport={(updated) => setReportData(updated)}
-                    onViewHistory={() => setStage("history")}
-                />
-            )}
-
-            {stage === "history" && (
-                <HistoryStage
-                    authUserId={authUserId}
-                    onSelectHistory={handleSelectHistory}
-                    onBack={handleBackFromHistory}
-                />
-            )}
-
-            {stage === "pricing" && (
-                <div className="hero-container">
-                    <div className="action-island-container">
-                        <NeonOffer
-                            onSelectPlan={(planId) => setSelectedPlan(planId)}
-                            onCheckout={(planId) => {
-                                setSelectedPlan(planId);
-                                if (!authUserId) setShowAuthModal(true);
-                                else setStage("checkout");
-                            }}
-                            authUserId={authUserId}
-                            creditsRemaining={creditsRemaining}
-                            timeRemaining={timeRemaining}
-                            showHeader={true}
-                        />
-                    </div>
-                    <div style={{ textAlign: "center", marginTop: 16 }}>
-                        <button
-                            type="button"
-                            onClick={() => setStage("hero")}
-                            style={{
-                                background: "none",
-                                border: "none",
-                                color: "#475569",
-                                fontSize: "0.85rem",
-                                cursor: "pointer",
-                                display: "inline-flex",
-                                alignItems: "center",
-                                justifyContent: "center",
-                                gap: 6,
-                                padding: "10px"
-                            }}
-                        >
-                            ÔåÉ Voltar
-                        </button>
-                    </div>
-                </div>
-            )}
+                            )
+                        }
 
-            {stage === "analyzing" && (
-                <div className="hero-container">
-                    {/* Estilos locais para anima├º├úo e cursor */}
-                    <style>{`
+                        {
+                            stage === "analyzing" && (
+                                <div className="hero-container">
+                                    {/* Estilos locais para anima├º├úo e cursor */}
+                                    <style>{`
                         @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
                         .cursor-block {
                             display: inline-block;
@@ -2785,182 +2874,184 @@ export default function AppPage() {
                         }
                     `}</style>
 
-                    <div className="loading-logo logo-pulse">vant.core scanner</div>
-
-                    <div style={{ width: "100%", margin: "0 auto" }}>
-                        <div style={{ height: 10, background: "rgba(255,255,255,0.08)", borderRadius: 999, overflow: "hidden", boxShadow: "0 0 10px rgba(0,0,0,0.3) inset" }}>
-                            <div
-                                style={{
-                                    width: `${Math.max(0, Math.min(100, progress))}%`,
-                                    height: "100%",
-                                    background: "linear-gradient(90deg, #38BDF8, #818CF8, #38BDF8)",
-                                    backgroundSize: "200% 100%",
-                                    animation: "gradient-move 2s linear infinite",
-                                    transition: "width 0.3s cubic-bezier(0.4, 0, 0.2, 1)",
-                                    boxShadow: "0 0 15px rgba(56, 189, 248, 0.6)"
-                                }}
-                            />
-                        </div>
+                                    <div className="loading-logo logo-pulse">vant.core scanner</div>
 
-                        <div style={{ marginTop: 24, minHeight: "40px" }}>
-                            <div className="terminal-log" style={{ color: "#38BDF8", fontFamily: "monospace", fontSize: "1.1rem", textShadow: "0 0 5px rgba(56, 189, 248, 0.3)" }}>
-                                &gt;&gt; {statusText}<span className="cursor-block"></span>
-                            </div>
-                        </div>
+                                    <div style={{ width: "100%", margin: "0 auto" }}>
+                                        <div style={{ height: 10, background: "rgba(255,255,255,0.08)", borderRadius: 999, overflow: "hidden", boxShadow: "0 0 10px rgba(0,0,0,0.3) inset" }}>
+                                            <div
+                                                style={{
+                                                    width: `${Math.max(0, Math.min(100, progress))}%`,
+                                                    height: "100%",
+                                                    background: "linear-gradient(90deg, #38BDF8, #818CF8, #38BDF8)",
+                                                    backgroundSize: "200% 100%",
+                                                    animation: "gradient-move 2s linear infinite",
+                                                    transition: "width 0.3s cubic-bezier(0.4, 0, 0.2, 1)",
+                                                    boxShadow: "0 0 15px rgba(56, 189, 248, 0.6)"
+                                                }}
+                                            />
+                                        </div>
 
-                        {/* Conte├║do Educativo sobre ATS */}
-                        <div className="edu-card" style={{
-                            marginTop: 40,
-                            background: "linear-gradient(135deg, rgba(56, 189, 248, 0.08), rgba(129, 140, 248, 0.08))",
-                            border: "1px solid rgba(56, 189, 248, 0.2)",
-                            borderRadius: 16,
-                            padding: 24,
-                            backdropFilter: "blur(10px)"
-                        }}>
-                            <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 16 }}>
-                                <div style={{ fontSize: "1.8rem" }}>­ƒÆí</div>
-                                <div>
-                                    <div style={{ color: "#38BDF8", fontSize: "0.9rem", fontWeight: 700, letterSpacing: "0.5px" }}>
-                                        VOC├è SABIA?
-                                    </div>
-                                    <div style={{ color: "#94A3B8", fontSize: "0.75rem", marginTop: 2 }}>
-                                        Enquanto analisamos seu CV...
-                                    </div>
-                                </div>
-                            </div>
+                                        <div style={{ marginTop: 24, minHeight: "40px" }}>
+                                            <div className="terminal-log" style={{ color: "#38BDF8", fontFamily: "monospace", fontSize: "1.1rem", textShadow: "0 0 5px rgba(56, 189, 248, 0.3)" }}>
+                                                &gt;&gt; {statusText}<span className="cursor-block"></span>
+                                            </div>
+                                        </div>
 
-                            {progress < 35 && (
-                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
-                                    <strong style={{ color: "#F8FAFC" }}>75% dos CVs s├úo rejeitados antes de chegar no recrutador.</strong>
-                                    <br /><br />
-                                    Sistemas ATS (Applicant Tracking System) filtram automaticamente curr├¡culos usando palavras-chave,
-                                    formata├º├úo e estrutura. Se seu CV n├úo est├í otimizado, ele nunca chega aos olhos humanos.
-                                </div>
-                            )}
+                                        {/* Conte├║do Educativo sobre ATS */}
+                                        <div className="edu-card" style={{
+                                            marginTop: 40,
+                                            background: "linear-gradient(135deg, rgba(56, 189, 248, 0.08), rgba(129, 140, 248, 0.08))",
+                                            border: "1px solid rgba(56, 189, 248, 0.2)",
+                                            borderRadius: 16,
+                                            padding: 24,
+                                            backdropFilter: "blur(10px)"
+                                        }}>
+                                            <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 16 }}>
+                                                <div style={{ fontSize: "1.8rem" }}>­ƒÆí</div>
+                                                <div>
+                                                    <div style={{ color: "#38BDF8", fontSize: "0.9rem", fontWeight: 700, letterSpacing: "0.5px" }}>
+                                                        VOC├è SABIA?
+                                                    </div>
+                                                    <div style={{ color: "#94A3B8", fontSize: "0.75rem", marginTop: 2 }}>
+                                                        Enquanto analisamos seu CV...
+                                                    </div>
+                                                </div>
+                                            </div>
 
-                            {progress >= 35 && progress < 70 && (
-                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
-                                    <div style={{
-                                        background: "rgba(239, 68, 68, 0.1)",
-                                        border: "1px solid rgba(239, 68, 68, 0.3)",
-                                        borderRadius: 8,
-                                        padding: 12,
-                                        marginBottom: 12
-                                    }}>
-                                        <div style={{ color: "#EF4444", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
-                                            ÔØî ANTES (Score: 42/100)
-                                        </div>
-                                        <div style={{ color: "#CBD5E1", fontSize: "0.85rem", fontStyle: "italic" }}>
-                                            "Trabalhei com vendas e atendimento ao cliente"
-                                        </div>
-                                    </div>
-                                    <div style={{
-                                        background: "rgba(16, 185, 129, 0.1)",
-                                        border: "1px solid rgba(16, 185, 129, 0.3)",
-                                        borderRadius: 8,
-                                        padding: 12
-                                    }}>
-                                        <div style={{ color: "#10B981", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
-                                            Ô£à DEPOIS (Score: 87/100)
-                                        </div>
-                                        <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>
-                                            "Especialista em <strong>Customer Success</strong> com <strong>+3 anos</strong> gerenciando
-                                            carteira de <strong>150+ clientes B2B</strong>. Aumentei reten├º├úo em <strong>34%</strong>
-                                            atrav├®s de estrat├®gias de <strong>upsell</strong> e <strong>onboarding estruturado</strong>."
-                                        </div>
-                                    </div>
-                                </div>
-                            )}
+                                            {progress < 35 && (
+                                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
+                                                    <strong style={{ color: "#F8FAFC" }}>75% dos CVs s├úo rejeitados antes de chegar no recrutador.</strong>
+                                                    <br /><br />
+                                                    Sistemas ATS (Applicant Tracking System) filtram automaticamente curr├¡culos usando palavras-chave,
+                                                    formata├º├úo e estrutura. Se seu CV n├úo est├í otimizado, ele nunca chega aos olhos humanos.
+                                                </div>
+                                            )}
 
-                            {progress >= 70 && (
-                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
-                                    <strong style={{ color: "#F8FAFC" }}>O que o ATS procura:</strong>
-                                    <div style={{ marginTop: 12, display: "grid", gap: 8 }}>
-                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                            <span><strong>Palavras-chave</strong> da descri├º├úo da vaga</span>
-                                        </div>
-                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                            <span><strong>N├║meros e resultados</strong> quantific├íveis</span>
-                                        </div>
-                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                            <span><strong>Formata├º├úo limpa</strong> sem tabelas ou colunas</span>
-                                        </div>
-                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                            <span><strong>Verbos de a├º├úo</strong> e linguagem t├®cnica</span>
+                                            {progress >= 35 && progress < 70 && (
+                                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
+                                                    <div style={{
+                                                        background: "rgba(239, 68, 68, 0.1)",
+                                                        border: "1px solid rgba(239, 68, 68, 0.3)",
+                                                        borderRadius: 8,
+                                                        padding: 12,
+                                                        marginBottom: 12
+                                                    }}>
+                                                        <div style={{ color: "#EF4444", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
+                                                            ÔØî ANTES (Score: 42/100)
+                                                        </div>
+                                                        <div style={{ color: "#CBD5E1", fontSize: "0.85rem", fontStyle: "italic" }}>
+                                                            "Trabalhei com vendas e atendimento ao cliente"
+                                                        </div>
+                                                    </div>
+                                                    <div style={{
+                                                        background: "rgba(16, 185, 129, 0.1)",
+                                                        border: "1px solid rgba(16, 185, 129, 0.3)",
+                                                        borderRadius: 8,
+                                                        padding: 12
+                                                    }}>
+                                                        <div style={{ color: "#10B981", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
+                                                            Ô£à DEPOIS (Score: 87/100)
+                                                        </div>
+                                                        <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>
+                                                            "Especialista em <strong>Customer Success</strong> com <strong>+3 anos</strong> gerenciando
+                                                            carteira de <strong>150+ clientes B2B</strong>. Aumentei reten├º├úo em <strong>34%</strong>
+                                                            atrav├®s de estrat├®gias de <strong>upsell</strong> e <strong>onboarding estruturado</strong>."
+                                                        </div>
+                                                    </div>
+                                                </div>
+                                            )}
+
+                                            {progress >= 70 && (
+                                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
+                                                    <strong style={{ color: "#F8FAFC" }}>O que o ATS procura:</strong>
+                                                    <div style={{ marginTop: 12, display: "grid", gap: 8 }}>
+                                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                            <span><strong>Palavras-chave</strong> da descri├º├úo da vaga</span>
+                                                        </div>
+                                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                            <span><strong>N├║meros e resultados</strong> quantific├íveis</span>
+                                                        </div>
+                                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                            <span><strong>Formata├º├úo limpa</strong> sem tabelas ou colunas</span>
+                                                        </div>
+                                                        <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                            <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                            <span><strong>Verbos de a├º├úo</strong> e linguagem t├®cnica</span>
+                                                        </div>
+                                                    </div>
+                                                </div>
+                                            )}
                                         </div>
                                     </div>
                                 </div>
-                            )}
-                        </div>
-                    </div>
-                </div>
-            )}
+                            )
+                        }
 
-            {stage === "processing_premium" && (
-                <>
-                    {/* UI de Erro Premium */}
-                    {premiumError && (
-                        <div className="hero-container" style={{ textAlign: "center" }}>
-                            <div style={{
-                                background: "rgba(239, 68, 68, 0.1)",
-                                border: "2px solid #EF4444",
-                                borderRadius: 12,
-                                padding: "40px",
-                                margin: "20px auto",
-                                maxWidth: "100%"
-                            }}>
-                                <div style={{ fontSize: "3rem", marginBottom: "16px" }}>ÔØî</div>
-                                <div style={{ color: "#EF4444", fontSize: "1.5rem", fontWeight: 700, marginBottom: "12px" }}>
-                                    Dados da sess├úo perdidos
-                                </div>
-                                <div style={{ color: "#94A3B8", fontSize: "1rem", marginBottom: "24px" }}>
-                                    Por favor, reinicie o processo.
-                                </div>
-                                <button
-                                    type="button"
-                                    onClick={() => {
-                                        setPremiumError("");
-                                        setStage("hero");
-                                        setJobDescription("");
-                                        setFile(null);
-                                        setPreviewData(null);
-                                        setReportData(null);
-                                    }}
-                                    style={{
-                                        background: "linear-gradient(135deg, #10B981, #059669)",
-                                        color: "#fff",
-                                        border: "none",
-                                        padding: "16px 32px",
-                                        borderRadius: 8,
-                                        fontSize: "1rem",
-                                        fontWeight: 700,
-                                        cursor: "pointer",
-                                        boxShadow: "0 4px 12px rgba(16, 185, 129, 0.3)",
-                                        transition: "all 0.2s"
-                                    }}
-                                    onMouseEnter={(e) => {
-                                        e.currentTarget.style.transform = "translateY(-2px)";
-                                        e.currentTarget.style.boxShadow = "0 6px 16px rgba(16, 185, 129, 0.4)";
-                                    }}
-                                    onMouseLeave={(e) => {
-                                        e.currentTarget.style.transform = "translateY(0)";
-                                        e.currentTarget.style.boxShadow = "0 4px 12px rgba(16, 185, 129, 0.3)";
-                                    }}
-                                >
-                                    Reiniciar
-                                </button>
-                            </div>
-                        </div>
-                    )}
+                        {
+                            stage === "processing_premium" && (
+                                <>
+                                    {/* UI de Erro Premium */}
+                                    {premiumError && (
+                                        <div className="hero-container" style={{ textAlign: "center" }}>
+                                            <div style={{
+                                                background: "rgba(239, 68, 68, 0.1)",
+                                                border: "2px solid #EF4444",
+                                                borderRadius: 12,
+                                                padding: "40px",
+                                                margin: "20px auto",
+                                                maxWidth: "100%"
+                                            }}>
+                                                <div style={{ fontSize: "3rem", marginBottom: "16px" }}>ÔØî</div>
+                                                <div style={{ color: "#EF4444", fontSize: "1.5rem", fontWeight: 700, marginBottom: "12px" }}>
+                                                    Dados da sess├úo perdidos
+                                                </div>
+                                                <div style={{ color: "#94A3B8", fontSize: "1rem", marginBottom: "24px" }}>
+                                                    Por favor, reinicie o processo.
+                                                </div>
+                                                <button
+                                                    type="button"
+                                                    onClick={() => {
+                                                        setPremiumError("");
+                                                        setStage("hero");
+                                                        setJobDescription("");
+                                                        setFile(null);
+                                                        setPreviewData(null);
+                                                        setReportData(null);
+                                                    }}
+                                                    style={{
+                                                        background: "linear-gradient(135deg, #10B981, #059669)",
+                                                        color: "#fff",
+                                                        border: "none",
+                                                        padding: "16px 32px",
+                                                        borderRadius: 8,
+                                                        fontSize: "1rem",
+                                                        fontWeight: 700,
+                                                        cursor: "pointer",
+                                                        boxShadow: "0 4px 12px rgba(16, 185, 129, 0.3)",
+                                                        transition: "all 0.2s"
+                                                    }}
+                                                    onMouseEnter={(e) => {
+                                                        e.currentTarget.style.transform = "translateY(-2px)";
+                                                        e.currentTarget.style.boxShadow = "0 6px 16px rgba(16, 185, 129, 0.4)";
+                                                    }}
+                                                    onMouseLeave={(e) => {
+                                                        e.currentTarget.style.transform = "translateY(0)";
+                                                        e.currentTarget.style.boxShadow = "0 4px 12px rgba(16, 185, 129, 0.3)";
+                                                    }}
+                                                >
+                                                    Reiniciar
+                                                </button>
+                                            </div>
+                                        </div>
+                                    )}
 
-                    {!premiumError && (
-                        <div className="hero-container">
-                            {/* Estilos locais para anima├º├úo e cursor */}
-                            <style>{`
+                                    {!premiumError && (
+                                        <div className="hero-container">
+                                            {/* Estilos locais para anima├º├úo e cursor */}
+                                            <style>{`
                         @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
                         .cursor-block {
                             display: inline-block;
@@ -2986,159 +3077,161 @@ export default function AppPage() {
                         }
                     `}</style>
 
-                            <div className="loading-logo logo-pulse">vant.core premium</div>
+                                            <div className="loading-logo logo-pulse">vant.core premium</div>
 
-                            <div style={{ width: "100%", margin: "0 auto" }}>
-                                <div style={{ height: 10, background: "rgba(255,255,255,0.08)", borderRadius: 999, overflow: "hidden", boxShadow: "0 0 10px rgba(0,0,0,0.3) inset" }}>
-                                    <div
-                                        className="progress-bar-glow"
-                                        style={{
-                                            width: `${Math.max(0, Math.min(100, progress))}%`,
-                                            height: "100%",
-                                            background: "linear-gradient(90deg, #10B981, #34D399, #10B981)",
-                                            backgroundSize: "200% 100%",
-                                            animation: "gradient-move 2s linear infinite, progress-pulse 2s ease-in-out infinite",
-                                            transition: "width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",
-                                            boxShadow: "0 0 15px rgba(16, 185, 129, 0.6)"
-                                        }}
-                                    /></div>
-
-                                <div style={{ marginTop: 16, display: "flex", justifyContent: "space-between", alignItems: "center" }}>
-                                    <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
-                                        {progress < 20 ? "Iniciando an├ílise..." :
-                                            progress < 40 ? "Analisando estrutura..." :
-                                                progress < 60 ? "Otimizando conte├║do..." :
-                                                    progress < 80 ? "Gerando relat├│rios..." :
-                                                        progress < 95 ? "Finalizando dossi├¬..." : "Concluindo processo"}
-                                    </div>
-                                    <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
-                                        <div style={{ color: "#64748B", fontSize: "0.75rem" }}>
-                                            ~{Math.ceil(estimatedTimeRemaining / 60)}:{String(estimatedTimeRemaining % 60).padStart(2, '0')}
-                                        </div>
-                                        <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 600 }}>
-                                            {Math.round(progress)}%
-                                        </div>
-                                    </div>
-                                </div>
-
-                                <div style={{
-                                    background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 78, 59, 0.4))",
-                                    border: "1px solid rgba(16, 185, 129, 0.2)",
-                                    borderRadius: 16,
-                                    padding: 24,
-                                    backdropFilter: "blur(10px)"
-                                }}>
-                                    <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 16 }}>
-                                        <div style={{ fontSize: "1.8rem" }}>­ƒÜÇ</div>
-                                        <div>
-                                            <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 700, letterSpacing: "0.5px" }}>
-                                                DOSSI├è PROFISSIONAL EM CONSTRU├ç├âO
-                                            </div>
-                                            <div style={{ color: "#94A3B8", fontSize: "0.75rem", marginTop: 2 }}>
-                                                Nossa IA est├í trabalhando para voc├¬...
-                                            </div>
-                                        </div>
-                                    </div>
-
-                                    {progress < 35 && (
-                                        <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
-                                            <strong style={{ color: "#F8FAFC" }}>Analisando 43 crit├®rios ATS avan├ºados.</strong>
-                                            <br /><br />
-                                            Verificamos alinhamento sem├óntico, estrutura de impacto, palavras-chave da vaga,
-                                            e comparando com padr├Áes de profissionais que foram contratados.
-                                        </div>
-                                    )}
-
-                                    {progress >= 35 && progress < 70 && (
-                                        <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
-                                            <div style={{
-                                                background: "rgba(16, 185, 129, 0.1)",
-                                                border: "1px solid rgba(16, 185, 129, 0.3)",
-                                                borderRadius: 8,
-                                                padding: 12,
-                                                marginBottom: 12
-                                            }}>
-                                                <div style={{ color: "#10B981", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
-                                                    Ô£à AN├üLISE ESTRUTURAL CONCLU├ìDA
-                                                </div>
-                                                <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>
-                                                    Identificamos os pontos exatos que impedem seu CV de passar nos filtros autom├íticos.
-                                                </div>
-                                            </div>
-                                            <div style={{
-                                                background: "rgba(56, 189, 248, 0.1)",
-                                                border: "1px solid rgba(56, 189, 248, 0.3)",
-                                                borderRadius: 8,
-                                                padding: 12,
-                                                marginBottom: 12
-                                            }}>
-                                                <div style={{ color: "#38BDF8", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
-                                                    ­ƒöä REESCREVENDO CONTE├ÜDO
-                                                </div>
-                                                <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>
-                                                    Aplicando otimiza├º├Áes sem├ónticas e reestruturando experi├¬ncias com m├®tricas de impacto.
+                                            <div style={{ width: "100%", margin: "0 auto" }}>
+                                                <div style={{ height: 10, background: "rgba(255,255,255,0.08)", borderRadius: 999, overflow: "hidden", boxShadow: "0 0 10px rgba(0,0,0,0.3) inset" }}>
+                                                    <div
+                                                        className="progress-bar-glow"
+                                                        style={{
+                                                            width: `${Math.max(0, Math.min(100, progress))}%`,
+                                                            height: "100%",
+                                                            background: "linear-gradient(90deg, #10B981, #34D399, #10B981)",
+                                                            backgroundSize: "200% 100%",
+                                                            animation: "gradient-move 2s linear infinite, progress-pulse 2s ease-in-out infinite",
+                                                            transition: "width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",
+                                                            boxShadow: "0 0 15px rgba(16, 185, 129, 0.6)"
+                                                        }}
+                                                    /></div>
+
+                                                <div style={{ marginTop: 16, display: "flex", justifyContent: "space-between", alignItems: "center" }}>
+                                                    <div style={{ color: "#94A3B8", fontSize: "0.8rem" }}>
+                                                        {progress < 20 ? "Iniciando an├ílise..." :
+                                                            progress < 40 ? "Analisando estrutura..." :
+                                                                progress < 60 ? "Otimizando conte├║do..." :
+                                                                    progress < 80 ? "Gerando relat├│rios..." :
+                                                                        progress < 95 ? "Finalizando dossi├¬..." : "Concluindo processo"}
+                                                    </div>
+                                                    <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
+                                                        <div style={{ color: "#64748B", fontSize: "0.75rem" }}>
+                                                            ~{Math.ceil(estimatedTimeRemaining / 60)}:{String(estimatedTimeRemaining % 60).padStart(2, '0')}
+                                                        </div>
+                                                        <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 600 }}>
+                                                            {Math.round(progress)}%
+                                                        </div>
+                                                    </div>
                                                 </div>
-                                            </div>
-                                        </div>
-                                    )}
 
-                                    {progress >= 70 && (
-                                        <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
-                                            <strong style={{ color: "#F8FAFC" }}>Seu dossi├¬ profissional est├í quase pronto!</strong>
-                                            <div style={{ marginTop: 12, display: "grid", gap: 8 }}>
-                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                                    <span>CV reestruturado com <strong>palavras-chave da vaga</strong></span>
-                                                </div>
-                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                                    <span><strong>Headline LinkedIn</strong> otimizada para recrutadores</span>
-                                                </div>
-                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                                    <span><strong>Biblioteca t├®cnica</strong> personalizada para seu cargo</span>
-                                                </div>
-                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
-                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
-                                                    <span><strong>Projeto pr├ítico</strong> para diferencial em entrevistas</span>
+                                                <div style={{
+                                                    background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 78, 59, 0.4))",
+                                                    border: "1px solid rgba(16, 185, 129, 0.2)",
+                                                    borderRadius: 16,
+                                                    padding: 24,
+                                                    backdropFilter: "blur(10px)"
+                                                }}>
+                                                    <div style={{ display: "flex", alignItems: "center", gap: 12, marginBottom: 16 }}>
+                                                        <div style={{ fontSize: "1.8rem" }}>­ƒÜÇ</div>
+                                                        <div>
+                                                            <div style={{ color: "#10B981", fontSize: "0.9rem", fontWeight: 700, letterSpacing: "0.5px" }}>
+                                                                DOSSI├è PROFISSIONAL EM CONSTRU├ç├âO
+                                                            </div>
+                                                            <div style={{ color: "#94A3B8", fontSize: "0.75rem", marginTop: 2 }}>
+                                                                Nossa IA est├í trabalhando para voc├¬...
+                                                            </div>
+                                                        </div>
+                                                    </div>
+
+                                                    {progress < 35 && (
+                                                        <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
+                                                            <strong style={{ color: "#F8FAFC" }}>Analisando 43 crit├®rios ATS avan├ºados.</strong>
+                                                            <br /><br />
+                                                            Verificamos alinhamento sem├óntico, estrutura de impacto, palavras-chave da vaga,
+                                                            e comparando com padr├Áes de profissionais que foram contratados.
+                                                        </div>
+                                                    )}
+
+                                                    {progress >= 35 && progress < 70 && (
+                                                        <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
+                                                            <div style={{
+                                                                background: "rgba(16, 185, 129, 0.1)",
+                                                                border: "1px solid rgba(16, 185, 129, 0.3)",
+                                                                borderRadius: 8,
+                                                                padding: 12,
+                                                                marginBottom: 12
+                                                            }}>
+                                                                <div style={{ color: "#10B981", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
+                                                                    Ô£à AN├üLISE ESTRUTURAL CONCLU├ìDA
+                                                                </div>
+                                                                <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>
+                                                                    Identificamos os pontos exatos que impedem seu CV de passar nos filtros autom├íticos.
+                                                                </div>
+                                                            </div>
+                                                            <div style={{
+                                                                background: "rgba(56, 189, 248, 0.1)",
+                                                                border: "1px solid rgba(56, 189, 248, 0.3)",
+                                                                borderRadius: 8,
+                                                                padding: 12,
+                                                                marginBottom: 12
+                                                            }}>
+                                                                <div style={{ color: "#38BDF8", fontSize: "0.8rem", fontWeight: 700, marginBottom: 6 }}>
+                                                                    ­ƒöä REESCREVENDO CONTE├ÜDO
+                                                                </div>
+                                                                <div style={{ color: "#E2E8F0", fontSize: "0.85rem" }}>
+                                                                    Aplicando otimiza├º├Áes sem├ónticas e reestruturando experi├¬ncias com m├®tricas de impacto.
+                                                                </div>
+                                                            </div>
+                                                        </div>
+                                                    )}
+
+                                                    {progress >= 70 && (
+                                                        <div style={{ color: "#E2E8F0", fontSize: "0.95rem", lineHeight: 1.6 }}>
+                                                            <strong style={{ color: "#F8FAFC" }}>Seu dossi├¬ profissional est├í quase pronto!</strong>
+                                                            <div style={{ marginTop: 12, display: "grid", gap: 8 }}>
+                                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                                    <span>CV reestruturado com <strong>palavras-chave da vaga</strong></span>
+                                                                </div>
+                                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                                    <span><strong>Headline LinkedIn</strong> otimizada para recrutadores</span>
+                                                                </div>
+                                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                                    <span><strong>Biblioteca t├®cnica</strong> personalizada para seu cargo</span>
+                                                                </div>
+                                                                <div style={{ display: "flex", alignItems: "start", gap: 8 }}>
+                                                                    <span style={{ color: "#10B981", fontSize: "1.2rem" }}>Ô£ô</span>
+                                                                    <span><strong>Projeto pr├ítico</strong> para diferencial em entrevistas</span>
+                                                                </div>
+                                                            </div>
+                                                        </div>
+                                                    )}
                                                 </div>
                                             </div>
                                         </div>
                                     )}
-                                </div>
-                            </div>
-                        </div>
-                    )}
-                </>
-            )}
-
-            {stage === "preview" && (
-                <div className="hero-container">
-                    {(() => {
-                        const data: Partial<PreviewData> = previewData ?? {};
-                        const nota = typeof data.nota_ats === "number" ? data.nota_ats : 0;
-                        const pilares = data.analise_por_pilares || {};
-                        const veredito = data.veredito || "AN├üLISE CONCLU├ìDA";
-                        const potencial = calcPotencial(nota);
-
-                        let texto_destaque = "Recrutadores e Gestores";
-                        const jobText = (jobDescription || "").toLowerCase();
-                        if (jobText.includes("nubank")) texto_destaque += " do Nubank";
-                        else if (jobText.includes("google")) texto_destaque += " do Google";
-                        else if (jobText.includes("amazon")) texto_destaque += " da Amazon";
-                        else if (jobText.includes("ita├║") || jobText.includes("itau")) texto_destaque += " do Ita├║";
-
-                        // ­ƒÄ» Calcular score projetado inteligente
-                        const impacto = typeof pilares.impacto === "number" ? pilares.impacto : 0;
-                        const keywords = typeof pilares.keywords === "number" ? pilares.keywords : 0;
-                        const ats = typeof pilares.ats === "number" ? pilares.ats : 0;
-
-                        // Contar gaps baseado nos gaps identificados no preview
-                        const gapsCount = (data.gap_1 ? 1 : 0) + (data.gap_2 ? 1 : 0);
-
-                        const projected = calculateProjectedScore(nota, gapsCount, 0, ats, keywords, impacto);
-
-                        const metaHtml = `
+                                </>
+                            )
+                        }
+
+                        {
+                            stage === "preview" && (
+                                <div className="hero-container">
+                                    {(() => {
+                                        const data: Partial<PreviewData> = previewData ?? {};
+                                        const nota = typeof data.nota_ats === "number" ? data.nota_ats : 0;
+                                        const pilares = data.analise_por_pilares || {};
+                                        const veredito = data.veredito || "AN├üLISE CONCLU├ìDA";
+                                        const potencial = calcPotencial(nota);
+
+                                        let texto_destaque = "Recrutadores e Gestores";
+                                        const jobText = (jobDescription || "").toLowerCase();
+                                        if (jobText.includes("nubank")) texto_destaque += " do Nubank";
+                                        else if (jobText.includes("google")) texto_destaque += " do Google";
+                                        else if (jobText.includes("amazon")) texto_destaque += " da Amazon";
+                                        else if (jobText.includes("ita├║") || jobText.includes("itau")) texto_destaque += " do Ita├║";
+
+                                        // ­ƒÄ» Calcular score projetado inteligente
+                                        const impacto = typeof pilares.impacto === "number" ? pilares.impacto : 0;
+                                        const keywords = typeof pilares.keywords === "number" ? pilares.keywords : 0;
+                                        const ats = typeof pilares.ats === "number" ? pilares.ats : 0;
+
+                                        // Contar gaps baseado nos gaps identificados no preview
+                                        const gapsCount = (data.gap_1 ? 1 : 0) + (data.gap_2 ? 1 : 0);
+
+                                        const projected = calculateProjectedScore(nota, gapsCount, 0, ats, keywords, impacto);
+
+                                        const metaHtml = `
     <div style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(16, 185, 129, 0.1)); 
                 border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 12px; padding: 20px; margin-top: 20px;">
         <div style="display: flex; align-items: center; gap: 15px;">
@@ -3154,14 +3247,14 @@ export default function AppPage() {
     </div>
     `;
 
-                        const dashHtml = renderDashboardMetricsHtml(nota, veredito, potencial, pilares, gapsCount);
+                                        const dashHtml = renderDashboardMetricsHtml(nota, veredito, potencial, pilares, gapsCount);
 
-                        const setorDetectado = typeof pilares.setor_detectado === "string" ? pilares.setor_detectado : "Gest├úo Estrat├®gica";
-                        const exemploMelhoria = `Especialista em ${setorDetectado} com hist├│rico de ` +
-                            "lideran├ºa em projetos de alta complexidade. Otimizou o budget operacional em 22%..." +
-                            "Implementa├º├úo de frameworks ├ígeis e reestrutura├º├úo de governan├ºa corporativa.";
+                                        const setorDetectado = typeof pilares.setor_detectado === "string" ? pilares.setor_detectado : "Gest├úo Estrat├®gica";
+                                        const exemploMelhoria = `Especialista em ${setorDetectado} com hist├│rico de ` +
+                                            "lideran├ºa em projetos de alta complexidade. Otimizou o budget operacional em 22%..." +
+                                            "Implementa├º├úo de frameworks ├ígeis e reestrutura├º├úo de governan├ºa corporativa.";
 
-                        const xrayHtml = `
+                                        const xrayHtml = `
         <div style='background: rgba(15, 23, 42, 0.4); border: 1px solid rgba(56, 189, 248, 0.2); padding: 16px; border-radius: 12px; position: relative; overflow: hidden; margin-top: 20px;'>
             <div style="position: absolute; top: -20px; right: -20px; background: #38BDF8; width: 60px; height: 60px; filter: blur(40px); opacity: 0.1;"></div>
             
@@ -3183,477 +3276,477 @@ export default function AppPage() {
         </div>
         `;
 
-                        return (
-                            <>
-                                <div dangerouslySetInnerHTML={{ __html: metaHtml }} />
-
-                                <div className="action-island-container" style={{ textAlign: "left", marginTop: 18 }}>
-                                    <div dangerouslySetInnerHTML={{ __html: dashHtml }} />
-
-                                    {/* PR├ëVIA DE VALOR - Sugest├Áes Concretas da IA */}
-                                    {data.gap_1 && data.gap_2 && (
-                                        <div style={{ marginTop: 24, marginBottom: 32 }}>
-                                            <div style={{ textAlign: "center", marginBottom: 20, padding: "16px", background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(56, 189, 248, 0.05))", borderRadius: 12, border: "1px solid rgba(16, 185, 129, 0.3)" }}>
-                                                <div style={{ fontSize: "1.5rem", marginBottom: 8 }}>Ô£¿</div>
-                                                <div style={{ color: "#10B981", fontSize: "1.1rem", fontWeight: 700, marginBottom: 4 }}>
-                                                    PR├ëVIA GRATUITA
-                                                </div>
-                                                <div style={{ color: "#E2E8F0", fontSize: "0.9rem" }}>
-                                                    Nossa IA analisou seu CV e identificou 2 problemas cr├¡ticos
-                                                </div>
-                                            </div>
-
-                                            {/* Gap 1 - Dados reais da IA */}
-                                            <div style={{
-                                                background: "rgba(15, 23, 42, 0.6)",
-                                                border: "1px solid rgba(239, 68, 68, 0.3)",
-                                                borderLeft: "4px solid #EF4444",
-                                                borderRadius: 12,
-                                                padding: 20,
-                                                marginBottom: 16
-                                            }}>
-                                                <div style={{ display: "flex", alignItems: "start", gap: 12, marginBottom: 12 }}>
-                                                    <div style={{
-                                                        background: "rgba(239, 68, 68, 0.2)",
-                                                        borderRadius: "50%",
-                                                        width: 32,
-                                                        height: 32,
-                                                        display: "flex",
-                                                        alignItems: "center",
-                                                        justifyContent: "center",
-                                                        fontSize: "1rem",
-                                                        flexShrink: 0
-                                                    }}>ÔÜá´©Å</div>
-                                                    <div style={{ flex: 1 }}>
-                                                        <div style={{ color: "#EF4444", fontSize: "0.85rem", fontWeight: 700, marginBottom: 4 }}>
-                                                            PROBLEMA #1: {data.gap_1.titulo || "Falta de Resultados Quantific├íveis"}
-                                                        </div>
-                                                        <div style={{ color: "#94A3B8", fontSize: "0.85rem", lineHeight: 1.5 }}>
-                                                            {data.gap_1.explicacao || "Seu CV usa descri├º├Áes gen├®ricas sem n├║meros ou impacto mensur├ível."}
-                                                        </div>
-                                                    </div>
-                                                </div>
-
-                                                {data.gap_1.exemplo_atual && (
-                                                    <div style={{
-                                                        background: "transparent",
-                                                        borderLeft: "2px solid #EF4444",
-                                                        borderRadius: 6,
-                                                        padding: "12px 0 12px 16px",
-                                                        marginBottom: 12,
-                                                        position: "relative",
-                                                        opacity: 0.7
-                                                    }}>
-                                                        <div style={{
-                                                            position: "absolute",
-                                                            left: "-8px",
-                                                            top: "12px",
-                                                            color: "#EF4444",
-                                                            fontSize: "0.7rem",
-                                                            fontWeight: 700
-                                                        }}>ÔØî</div>
-                                                        <div style={{ color: "#94A3B8", fontSize: "0.75rem", fontWeight: 600, marginBottom: 4 }}>
-                                                            VERS├âO ATUAL (Score: {nota}/100)
-                                                        </div>
-                                                        <div style={{
-                                                            color: "#475569",
-                                                            fontSize: "0.85rem",
-                                                            fontStyle: "italic",
-                                                            lineHeight: 1.5,
-                                                            textDecoration: "line-through"
-                                                        }}>
-                                                            "{data.gap_1.exemplo_atual}"
-                                                        </div>
-                                                    </div>
-                                                )}
-
-                                                {data.gap_1.exemplo_otimizado && (
-                                                    <div style={{
-                                                        background: "rgba(34, 197, 94, 0.18)",
-                                                        border: "1px solid rgba(34, 197, 94, 0.35)",
-                                                        borderRadius: 10,
-                                                        padding: 14,
-                                                        boxShadow: "0 0 15px rgba(34, 197, 94, 0.15)"
-                                                    }}>
-                                                        <div style={{
-                                                            display: "flex",
-                                                            justifyContent: "space-between",
-                                                            alignItems: "center",
-                                                            marginBottom: 4,
-                                                            gap: 8
-                                                        }}>
-                                                            <div style={{ color: "#10B981", fontSize: "0.8rem", fontWeight: 700 }}>
-                                                                Ô£à VERS├âO OTIMIZADA (Score: 94/100)
+                                        return (
+                                            <>
+                                                <div dangerouslySetInnerHTML={{ __html: metaHtml }} />
+
+                                                <div className="action-island-container" style={{ textAlign: "left", marginTop: 18 }}>
+                                                    <div dangerouslySetInnerHTML={{ __html: dashHtml }} />
+
+                                                    {/* PR├ëVIA DE VALOR - Sugest├Áes Concretas da IA */}
+                                                    {data.gap_1 && data.gap_2 && (
+                                                        <div style={{ marginTop: 24, marginBottom: 32 }}>
+                                                            <div style={{ textAlign: "center", marginBottom: 20, padding: "16px", background: "linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(56, 189, 248, 0.05))", borderRadius: 12, border: "1px solid rgba(16, 185, 129, 0.3)" }}>
+                                                                <div style={{ fontSize: "1.5rem", marginBottom: 8 }}>Ô£¿</div>
+                                                                <div style={{ color: "#10B981", fontSize: "1.1rem", fontWeight: 700, marginBottom: 4 }}>
+                                                                    PR├ëVIA GRATUITA
+                                                                </div>
+                                                                <div style={{ color: "#E2E8F0", fontSize: "0.9rem" }}>
+                                                                    Nossa IA analisou seu CV e identificou 2 problemas cr├¡ticos
+                                                                </div>
                                                             </div>
+
+                                                            {/* Gap 1 - Dados reais da IA */}
                                                             <div style={{
-                                                                background: "#10B981",
-                                                                color: "#fff",
-                                                                fontSize: "0.65rem",
-                                                                fontWeight: 700,
-                                                                padding: "3px 10px",
-                                                                borderRadius: 999
+                                                                background: "rgba(15, 23, 42, 0.6)",
+                                                                border: "1px solid rgba(239, 68, 68, 0.3)",
+                                                                borderLeft: "4px solid #EF4444",
+                                                                borderRadius: 12,
+                                                                padding: 20,
+                                                                marginBottom: 16
                                                             }}>
-                                                                +{94 - nota} pts
+                                                                <div style={{ display: "flex", alignItems: "start", gap: 12, marginBottom: 12 }}>
+                                                                    <div style={{
+                                                                        background: "rgba(239, 68, 68, 0.2)",
+                                                                        borderRadius: "50%",
+                                                                        width: 32,
+                                                                        height: 32,
+                                                                        display: "flex",
+                                                                        alignItems: "center",
+                                                                        justifyContent: "center",
+                                                                        fontSize: "1rem",
+                                                                        flexShrink: 0
+                                                                    }}>ÔÜá´©Å</div>
+                                                                    <div style={{ flex: 1 }}>
+                                                                        <div style={{ color: "#EF4444", fontSize: "0.85rem", fontWeight: 700, marginBottom: 4 }}>
+                                                                            PROBLEMA #1: {data.gap_1.titulo || "Falta de Resultados Quantific├íveis"}
+                                                                        </div>
+                                                                        <div style={{ color: "#94A3B8", fontSize: "0.85rem", lineHeight: 1.5 }}>
+                                                                            {data.gap_1.explicacao || "Seu CV usa descri├º├Áes gen├®ricas sem n├║meros ou impacto mensur├ível."}
+                                                                        </div>
+                                                                    </div>
+                                                                </div>
+
+                                                                {data.gap_1.exemplo_atual && (
+                                                                    <div style={{
+                                                                        background: "transparent",
+                                                                        borderLeft: "2px solid #EF4444",
+                                                                        borderRadius: 6,
+                                                                        padding: "12px 0 12px 16px",
+                                                                        marginBottom: 12,
+                                                                        position: "relative",
+                                                                        opacity: 0.7
+                                                                    }}>
+                                                                        <div style={{
+                                                                            position: "absolute",
+                                                                            left: "-8px",
+                                                                            top: "12px",
+                                                                            color: "#EF4444",
+                                                                            fontSize: "0.7rem",
+                                                                            fontWeight: 700
+                                                                        }}>ÔØî</div>
+                                                                        <div style={{ color: "#94A3B8", fontSize: "0.75rem", fontWeight: 600, marginBottom: 4 }}>
+                                                                            VERS├âO ATUAL (Score: {nota}/100)
+                                                                        </div>
+                                                                        <div style={{
+                                                                            color: "#475569",
+                                                                            fontSize: "0.85rem",
+                                                                            fontStyle: "italic",
+                                                                            lineHeight: 1.5,
+                                                                            textDecoration: "line-through"
+                                                                        }}>
+                                                                            "{data.gap_1.exemplo_atual}"
+                                                                        </div>
+                                                                    </div>
+                                                                )}
+
+                                                                {data.gap_1.exemplo_otimizado && (
+                                                                    <div style={{
+                                                                        background: "rgba(34, 197, 94, 0.18)",
+                                                                        border: "1px solid rgba(34, 197, 94, 0.35)",
+                                                                        borderRadius: 10,
+                                                                        padding: 14,
+                                                                        boxShadow: "0 0 15px rgba(34, 197, 94, 0.15)"
+                                                                    }}>
+                                                                        <div style={{
+                                                                            display: "flex",
+                                                                            justifyContent: "space-between",
+                                                                            alignItems: "center",
+                                                                            marginBottom: 4,
+                                                                            gap: 8
+                                                                        }}>
+                                                                            <div style={{ color: "#10B981", fontSize: "0.8rem", fontWeight: 700 }}>
+                                                                                Ô£à VERS├âO OTIMIZADA (Score: 94/100)
+                                                                            </div>
+                                                                            <div style={{
+                                                                                background: "#10B981",
+                                                                                color: "#fff",
+                                                                                fontSize: "0.65rem",
+                                                                                fontWeight: 700,
+                                                                                padding: "3px 10px",
+                                                                                borderRadius: 999
+                                                                            }}>
+                                                                                +{94 - nota} pts
+                                                                            </div>
+                                                                        </div>
+                                                                        <div style={{ color: "#FFFFFF", fontSize: "0.9rem", fontWeight: 500, lineHeight: 1.6 }}
+                                                                            dangerouslySetInnerHTML={{ __html: data.gap_1.exemplo_otimizado.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') }} />
+                                                                    </div>
+                                                                )}
+
+                                                                <div style={{
+                                                                    marginTop: 12,
+                                                                    padding: 10,
+                                                                    background: "rgba(56, 189, 248, 0.1)",
+                                                                    borderRadius: 6,
+                                                                    display: "flex",
+                                                                    alignItems: "center",
+                                                                    gap: 8
+                                                                }}>
+                                                                    <span style={{ fontSize: "1rem" }}>­ƒÆí</span>
+                                                                    <span style={{ color: "#38BDF8", fontSize: "0.8rem", fontWeight: 600 }}>
+                                                                        Impacto: +{94 - nota} pontos no score ATS
+                                                                    </span>
+                                                                </div>
                                                             </div>
-                                                        </div>
-                                                        <div style={{ color: "#FFFFFF", fontSize: "0.9rem", fontWeight: 500, lineHeight: 1.6 }}
-                                                            dangerouslySetInnerHTML={{ __html: data.gap_1.exemplo_otimizado.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') }} />
-                                                    </div>
-                                                )}
-
-                                                <div style={{
-                                                    marginTop: 12,
-                                                    padding: 10,
-                                                    background: "rgba(56, 189, 248, 0.1)",
-                                                    borderRadius: 6,
-                                                    display: "flex",
-                                                    alignItems: "center",
-                                                    gap: 8
-                                                }}>
-                                                    <span style={{ fontSize: "1rem" }}>­ƒÆí</span>
-                                                    <span style={{ color: "#38BDF8", fontSize: "0.8rem", fontWeight: 600 }}>
-                                                        Impacto: +{94 - nota} pontos no score ATS
-                                                    </span>
-                                                </div>
-                                            </div>
 
-                                            {/* Gap 2 - Dados reais da IA */}
-                                            <div style={{
-                                                background: "rgba(15, 23, 42, 0.6)",
-                                                border: "1px solid rgba(245, 158, 11, 0.3)",
-                                                borderLeft: "4px solid #F59E0B",
-                                                borderRadius: 12,
-                                                padding: 20
-                                            }}>
-                                                <div style={{ display: "flex", alignItems: "start", gap: 12, marginBottom: 12 }}>
-                                                    <div style={{
-                                                        background: "rgba(245, 158, 11, 0.2)",
-                                                        borderRadius: "50%",
-                                                        width: 32,
-                                                        height: 32,
-                                                        display: "flex",
-                                                        alignItems: "center",
-                                                        justifyContent: "center",
-                                                        fontSize: "1rem",
-                                                        flexShrink: 0
-                                                    }}>­ƒÄ»</div>
-                                                    <div style={{ flex: 1 }}>
-                                                        <div style={{ color: "#F59E0B", fontSize: "0.85rem", fontWeight: 700, marginBottom: 4 }}>
-                                                            PROBLEMA #2: {data.gap_2.titulo || "Palavras-Chave da Vaga Ausentes"}
-                                                        </div>
-                                                        <div style={{ color: "#94A3B8", fontSize: "0.85rem", lineHeight: 1.5 }}>
-                                                            {data.gap_2.explicacao || "Termos cr├¡ticos da vaga n├úo aparecem no seu CV."}
+                                                            {/* Gap 2 - Dados reais da IA */}
+                                                            <div style={{
+                                                                background: "rgba(15, 23, 42, 0.6)",
+                                                                border: "1px solid rgba(245, 158, 11, 0.3)",
+                                                                borderLeft: "4px solid #F59E0B",
+                                                                borderRadius: 12,
+                                                                padding: 20
+                                                            }}>
+                                                                <div style={{ display: "flex", alignItems: "start", gap: 12, marginBottom: 12 }}>
+                                                                    <div style={{
+                                                                        background: "rgba(245, 158, 11, 0.2)",
+                                                                        borderRadius: "50%",
+                                                                        width: 32,
+                                                                        height: 32,
+                                                                        display: "flex",
+                                                                        alignItems: "center",
+                                                                        justifyContent: "center",
+                                                                        fontSize: "1rem",
+                                                                        flexShrink: 0
+                                                                    }}>­ƒÄ»</div>
+                                                                    <div style={{ flex: 1 }}>
+                                                                        <div style={{ color: "#F59E0B", fontSize: "0.85rem", fontWeight: 700, marginBottom: 4 }}>
+                                                                            PROBLEMA #2: {data.gap_2.titulo || "Palavras-Chave da Vaga Ausentes"}
+                                                                        </div>
+                                                                        <div style={{ color: "#94A3B8", fontSize: "0.85rem", lineHeight: 1.5 }}>
+                                                                            {data.gap_2.explicacao || "Termos cr├¡ticos da vaga n├úo aparecem no seu CV."}
+                                                                        </div>
+                                                                    </div>
+                                                                </div>
+
+                                                                {data.gap_2.termos_faltando && data.gap_2.termos_faltando.length > 0 && (
+                                                                    <div style={{
+                                                                        background: "transparent",
+                                                                        padding: "12px 0",
+                                                                        marginBottom: 8
+                                                                    }}>
+                                                                        <div style={{ color: "#FCD34D", fontSize: "0.75rem", fontWeight: 600, marginBottom: 8 }}>
+                                                                            ­ƒöì TERMOS FALTANDO NO SEU CV:
+                                                                        </div>
+                                                                        <div style={{ display: "flex", flexWrap: "wrap", gap: 6 }}>
+                                                                            {data.gap_2.termos_faltando.slice(0, 5).map((term: string, i: number) => (
+                                                                                <span
+                                                                                    key={i}
+                                                                                    style={{
+                                                                                        background: "transparent",
+                                                                                        color: "#FCD34D",
+                                                                                        padding: "4px 10px",
+                                                                                        borderRadius: 16,
+                                                                                        fontSize: "0.75rem",
+                                                                                        fontWeight: 600,
+                                                                                        border: "1px dashed rgba(252, 211, 77, 0.6)",
+                                                                                        transition: "all 0.2s",
+                                                                                        cursor: "pointer"
+                                                                                    }}
+                                                                                    onMouseEnter={(e) => {
+                                                                                        e.currentTarget.style.background = "rgba(252, 211, 77, 0.12)";
+                                                                                        e.currentTarget.style.borderStyle = "solid";
+                                                                                    }}
+                                                                                    onMouseLeave={(e) => {
+                                                                                        e.currentTarget.style.background = "transparent";
+                                                                                        e.currentTarget.style.borderStyle = "dashed";
+                                                                                    }}
+                                                                                >
+                                                                                    {term}
+                                                                                </span>
+                                                                            ))}
+                                                                        </div>
+                                                                    </div>
+                                                                )}
+
+                                                                <div style={{
+                                                                    marginTop: 12,
+                                                                    padding: 16,
+                                                                    background: "linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(56, 189, 248, 0.1))",
+                                                                    borderRadius: 10,
+                                                                    border: "2px solid rgba(16, 185, 129, 0.4)",
+                                                                    boxShadow: "0 4px 12px rgba(16, 185, 129, 0.2)"
+                                                                }}>
+                                                                    <div style={{ color: "#10B981", fontSize: "1rem", fontWeight: 800, marginBottom: 8, textAlign: "center", textTransform: "uppercase", letterSpacing: "1px" }}>
+                                                                        ­ƒÄü NA VERS├âO PREMIUM VOC├è RECEBE:
+                                                                    </div>
+                                                                    <div style={{ display: "flex", flexDirection: "column", gap: "12px" }}>
+                                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
+                                                                            <div style={{
+                                                                                minWidth: "28px",
+                                                                                height: "28px",
+                                                                                background: "linear-gradient(135deg, #10B981, #059669)",
+                                                                                borderRadius: "50%",
+                                                                                display: "flex",
+                                                                                alignItems: "center",
+                                                                                justifyContent: "center",
+                                                                                fontSize: "1rem",
+                                                                                flexShrink: 0,
+                                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
+                                                                            }}>Ô£ô</div>
+                                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
+                                                                                <strong>CV reescrito</strong> com todas as palavras-chave integradas naturalmente
+                                                                            </span>
+                                                                        </div>
+                                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
+                                                                            <div style={{
+                                                                                minWidth: "28px",
+                                                                                height: "28px",
+                                                                                background: "linear-gradient(135deg, #10B981, #059669)",
+                                                                                borderRadius: "50%",
+                                                                                display: "flex",
+                                                                                alignItems: "center",
+                                                                                justifyContent: "center",
+                                                                                fontSize: "1rem",
+                                                                                flexShrink: 0,
+                                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
+                                                                            }}>Ô£ô</div>
+                                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
+                                                                                An├ílise completa de <strong>43 crit├®rios ATS</strong> (n├úo apenas 2)
+                                                                            </span>
+                                                                        </div>
+                                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
+                                                                            <div style={{
+                                                                                minWidth: "28px",
+                                                                                height: "28px",
+                                                                                background: "linear-gradient(135deg, #10B981, #059669)",
+                                                                                borderRadius: "50%",
+                                                                                display: "flex",
+                                                                                alignItems: "center",
+                                                                                justifyContent: "center",
+                                                                                fontSize: "1rem",
+                                                                                flexShrink: 0,
+                                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
+                                                                            }}>Ô£ô</div>
+                                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
+                                                                                <strong>Headline do LinkedIn</strong> otimizada para recrutadores
+                                                                            </span>
+                                                                        </div>
+                                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
+                                                                            <div style={{
+                                                                                minWidth: "28px",
+                                                                                height: "28px",
+                                                                                background: "linear-gradient(135deg, #10B981, #059669)",
+                                                                                borderRadius: "50%",
+                                                                                display: "flex",
+                                                                                alignItems: "center",
+                                                                                justifyContent: "center",
+                                                                                fontSize: "1rem",
+                                                                                flexShrink: 0,
+                                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
+                                                                            }}>Ô£ô</div>
+                                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
+                                                                                <strong>Biblioteca t├®cnica</strong> personalizada para seu cargo
+                                                                            </span>
+                                                                        </div>
+                                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
+                                                                            <div style={{
+                                                                                minWidth: "28px",
+                                                                                height: "28px",
+                                                                                background: "linear-gradient(135deg, #10B981, #059669)",
+                                                                                borderRadius: "50%",
+                                                                                display: "flex",
+                                                                                alignItems: "center",
+                                                                                justifyContent: "center",
+                                                                                fontSize: "1rem",
+                                                                                flexShrink: 0,
+                                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
+                                                                            }}>Ô£ô</div>
+                                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
+                                                                                <strong>Projeto pr├ítico</strong> para diferencial em entrevistas
+                                                                            </span>
+                                                                        </div>
+                                                                    </div>
+                                                                </div>
+                                                            </div>
                                                         </div>
-                                                    </div>
-                                                </div>
+                                                    )}
 
-                                                {data.gap_2.termos_faltando && data.gap_2.termos_faltando.length > 0 && (
-                                                    <div style={{
-                                                        background: "transparent",
-                                                        padding: "12px 0",
-                                                        marginBottom: 8
-                                                    }}>
-                                                        <div style={{ color: "#FCD34D", fontSize: "0.75rem", fontWeight: 600, marginBottom: 8 }}>
-                                                            ­ƒöì TERMOS FALTANDO NO SEU CV:
-                                                        </div>
-                                                        <div style={{ display: "flex", flexWrap: "wrap", gap: 6 }}>
-                                                            {data.gap_2.termos_faltando.slice(0, 5).map((term: string, i: number) => (
-                                                                <span
-                                                                    key={i}
+                                                    {/* RODAP├ë CONDICIONAL: Cr├®ditos vs Oferta de Venda */}
+                                                    {authUserId && creditsRemaining > 0 ? (
+                                                        <div style={{ marginTop: 32 }}>
+                                                            <div style={{
+                                                                background: "linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(56, 189, 248, 0.1))",
+                                                                border: "2px solid #10B981",
+                                                                borderRadius: 16,
+                                                                padding: "28px",
+                                                                textAlign: "center",
+                                                                boxShadow: "0 0 30px rgba(16, 185, 129, 0.2)"
+                                                            }}>
+                                                                <div style={{ fontSize: "2rem", marginBottom: 12 }}>ÔÜí</div>
+                                                                <div style={{ color: "#10B981", fontSize: "1.2rem", fontWeight: 800, marginBottom: 8 }}>
+                                                                    Voc├¬ tem {creditsRemaining} cr├®dito(s) dispon├¡vel(is)!
+                                                                </div>
+                                                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", marginBottom: 20, lineHeight: 1.5 }}>
+                                                                    Use 1 cr├®dito agora para desbloquear a an├ílise completa,<br />
+                                                                    CV otimizado e todas as ferramentas premium.
+                                                                </div>
+                                                                <button
+                                                                    type="button"
+                                                                    onClick={() => onUseCreditFromPreview()}
                                                                     style={{
-                                                                        background: "transparent",
-                                                                        color: "#FCD34D",
-                                                                        padding: "4px 10px",
-                                                                        borderRadius: 16,
-                                                                        fontSize: "0.75rem",
-                                                                        fontWeight: 600,
-                                                                        border: "1px dashed rgba(252, 211, 77, 0.6)",
+                                                                        width: "100%",
+                                                                        maxWidth: 420,
+                                                                        background: "linear-gradient(135deg, #10B981, #059669)",
+                                                                        color: "#fff",
+                                                                        border: "none",
+                                                                        padding: "20px",
+                                                                        borderRadius: 12,
+                                                                        fontSize: "1.15rem",
+                                                                        fontWeight: 800,
+                                                                        cursor: "pointer",
+                                                                        boxShadow: "0 6px 20px rgba(16, 185, 129, 0.5)",
                                                                         transition: "all 0.2s",
-                                                                        cursor: "pointer"
+                                                                        textTransform: "uppercase",
+                                                                        letterSpacing: "0.5px"
                                                                     }}
                                                                     onMouseEnter={(e) => {
-                                                                        e.currentTarget.style.background = "rgba(252, 211, 77, 0.12)";
-                                                                        e.currentTarget.style.borderStyle = "solid";
+                                                                        e.currentTarget.style.transform = "translateY(-2px)";
+                                                                        e.currentTarget.style.boxShadow = "0 8px 25px rgba(16, 185, 129, 0.6)";
                                                                     }}
                                                                     onMouseLeave={(e) => {
-                                                                        e.currentTarget.style.background = "transparent";
-                                                                        e.currentTarget.style.borderStyle = "dashed";
+                                                                        e.currentTarget.style.transform = "translateY(0)";
+                                                                        e.currentTarget.style.boxShadow = "0 6px 20px rgba(16, 185, 129, 0.5)";
                                                                     }}
+                                                                    onMouseDown={(e) => e.currentTarget.style.transform = "scale(0.98)"}
+                                                                    onMouseUp={(e) => e.currentTarget.style.transform = "translateY(-2px)"}
                                                                 >
-                                                                    {term}
-                                                                </span>
-                                                            ))}
-                                                        </div>
-                                                    </div>
-                                                )}
-
-                                                <div style={{
-                                                    marginTop: 12,
-                                                    padding: 16,
-                                                    background: "linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(56, 189, 248, 0.1))",
-                                                    borderRadius: 10,
-                                                    border: "2px solid rgba(16, 185, 129, 0.4)",
-                                                    boxShadow: "0 4px 12px rgba(16, 185, 129, 0.2)"
-                                                }}>
-                                                    <div style={{ color: "#10B981", fontSize: "1rem", fontWeight: 800, marginBottom: 8, textAlign: "center", textTransform: "uppercase", letterSpacing: "1px" }}>
-                                                        ­ƒÄü NA VERS├âO PREMIUM VOC├è RECEBE:
-                                                    </div>
-                                                    <div style={{ display: "flex", flexDirection: "column", gap: "12px" }}>
-                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
-                                                            <div style={{
-                                                                minWidth: "28px",
-                                                                height: "28px",
-                                                                background: "linear-gradient(135deg, #10B981, #059669)",
-                                                                borderRadius: "50%",
-                                                                display: "flex",
-                                                                alignItems: "center",
-                                                                justifyContent: "center",
-                                                                fontSize: "1rem",
-                                                                flexShrink: 0,
-                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
-                                                            }}>Ô£ô</div>
-                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
-                                                                <strong>CV reescrito</strong> com todas as palavras-chave integradas naturalmente
-                                                            </span>
-                                                        </div>
-                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
-                                                            <div style={{
-                                                                minWidth: "28px",
-                                                                height: "28px",
-                                                                background: "linear-gradient(135deg, #10B981, #059669)",
-                                                                borderRadius: "50%",
-                                                                display: "flex",
-                                                                alignItems: "center",
-                                                                justifyContent: "center",
-                                                                fontSize: "1rem",
-                                                                flexShrink: 0,
-                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
-                                                            }}>Ô£ô</div>
-                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
-                                                                An├ílise completa de <strong>43 crit├®rios ATS</strong> (n├úo apenas 2)
-                                                            </span>
-                                                        </div>
-                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
-                                                            <div style={{
-                                                                minWidth: "28px",
-                                                                height: "28px",
-                                                                background: "linear-gradient(135deg, #10B981, #059669)",
-                                                                borderRadius: "50%",
-                                                                display: "flex",
-                                                                alignItems: "center",
-                                                                justifyContent: "center",
-                                                                fontSize: "1rem",
-                                                                flexShrink: 0,
-                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
-                                                            }}>Ô£ô</div>
-                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
-                                                                <strong>Headline do LinkedIn</strong> otimizada para recrutadores
-                                                            </span>
+                                                                    ÔÜí USAR 1 CR├ëDITO E DESBLOQUEAR
+                                                                </button>
+                                                            </div>
                                                         </div>
-                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
-                                                            <div style={{
-                                                                minWidth: "28px",
-                                                                height: "28px",
-                                                                background: "linear-gradient(135deg, #10B981, #059669)",
-                                                                borderRadius: "50%",
-                                                                display: "flex",
-                                                                alignItems: "center",
-                                                                justifyContent: "center",
-                                                                fontSize: "1rem",
-                                                                flexShrink: 0,
-                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
-                                                            }}>Ô£ô</div>
-                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
-                                                                <strong>Biblioteca t├®cnica</strong> personalizada para seu cargo
-                                                            </span>
+                                                    ) : (
+                                                        <div style={{ marginTop: 32 }}>
+                                                            <NeonOffer
+                                                                onSelectPlan={(planId) => setSelectedPlan(planId)}
+                                                                onCheckout={(planId) => {
+                                                                    setSelectedPlan(planId);
+                                                                    if (!authUserId) setShowAuthModal(true);
+                                                                    else setStage("checkout");
+                                                                }}
+                                                                authUserId={authUserId}
+                                                                creditsRemaining={creditsRemaining}
+                                                                timeRemaining={timeRemaining}
+                                                                showHeader={true}
+                                                            />
                                                         </div>
-                                                        <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
-                                                            <div style={{
-                                                                minWidth: "28px",
-                                                                height: "28px",
-                                                                background: "linear-gradient(135deg, #10B981, #059669)",
-                                                                borderRadius: "50%",
-                                                                display: "flex",
+                                                    )}
+
+                                                    {/* Bot├úo Voltar Discreto */}
+                                                    <div style={{ textAlign: "center", marginTop: 16 }}>
+                                                        <button
+                                                            type="button"
+                                                            onClick={() => setStage("hero")}
+                                                            style={{
+                                                                background: "none",
+                                                                border: "none",
+                                                                color: "#475569",
+                                                                fontSize: "0.85rem",
+                                                                cursor: "pointer",
+                                                                display: "inline-flex",
                                                                 alignItems: "center",
                                                                 justifyContent: "center",
-                                                                fontSize: "1rem",
-                                                                flexShrink: 0,
-                                                                boxShadow: "0 2px 8px rgba(16, 185, 129, 0.4)"
-                                                            }}>Ô£ô</div>
-                                                            <span style={{ color: "#F8FAFC", fontSize: "0.95rem", fontWeight: 600, lineHeight: 1.4 }}>
-                                                                <strong>Projeto pr├ítico</strong> para diferencial em entrevistas
-                                                            </span>
-                                                        </div>
+                                                                gap: 6,
+                                                                padding: "10px"
+                                                            }}
+                                                        >
+                                                            ÔåÉ Voltar para edi├º├úo
+                                                        </button>
                                                     </div>
                                                 </div>
-                                            </div>
-                                        </div>
-                                    )}
-
-                                    {/* RODAP├ë CONDICIONAL: Cr├®ditos vs Oferta de Venda */}
-                                    {authUserId && creditsRemaining > 0 ? (
-                                        <div style={{ marginTop: 32 }}>
-                                            <div style={{
-                                                background: "linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(56, 189, 248, 0.1))",
-                                                border: "2px solid #10B981",
-                                                borderRadius: 16,
-                                                padding: "28px",
-                                                textAlign: "center",
-                                                boxShadow: "0 0 30px rgba(16, 185, 129, 0.2)"
-                                            }}>
-                                                <div style={{ fontSize: "2rem", marginBottom: 12 }}>ÔÜí</div>
-                                                <div style={{ color: "#10B981", fontSize: "1.2rem", fontWeight: 800, marginBottom: 8 }}>
-                                                    Voc├¬ tem {creditsRemaining} cr├®dito(s) dispon├¡vel(is)!
-                                                </div>
-                                                <div style={{ color: "#E2E8F0", fontSize: "0.95rem", marginBottom: 20, lineHeight: 1.5 }}>
-                                                    Use 1 cr├®dito agora para desbloquear a an├ílise completa,<br />
-                                                    CV otimizado e todas as ferramentas premium.
-                                                </div>
-                                                <button
-                                                    type="button"
-                                                    onClick={() => onUseCreditFromPreview()}
-                                                    style={{
-                                                        width: "100%",
-                                                        maxWidth: 420,
-                                                        background: "linear-gradient(135deg, #10B981, #059669)",
-                                                        color: "#fff",
-                                                        border: "none",
-                                                        padding: "20px",
-                                                        borderRadius: 12,
-                                                        fontSize: "1.15rem",
-                                                        fontWeight: 800,
-                                                        cursor: "pointer",
-                                                        boxShadow: "0 6px 20px rgba(16, 185, 129, 0.5)",
-                                                        transition: "all 0.2s",
-                                                        textTransform: "uppercase",
-                                                        letterSpacing: "0.5px"
-                                                    }}
-                                                    onMouseEnter={(e) => {
-                                                        e.currentTarget.style.transform = "translateY(-2px)";
-                                                        e.currentTarget.style.boxShadow = "0 8px 25px rgba(16, 185, 129, 0.6)";
-                                                    }}
-                                                    onMouseLeave={(e) => {
-                                                        e.currentTarget.style.transform = "translateY(0)";
-                                                        e.currentTarget.style.boxShadow = "0 6px 20px rgba(16, 185, 129, 0.5)";
-                                                    }}
-                                                    onMouseDown={(e) => e.currentTarget.style.transform = "scale(0.98)"}
-                                                    onMouseUp={(e) => e.currentTarget.style.transform = "translateY(-2px)"}
-                                                >
-                                                    ÔÜí USAR 1 CR├ëDITO E DESBLOQUEAR
-                                                </button>
-                                            </div>
-                                        </div>
-                                    ) : (
-                                        <div style={{ marginTop: 32 }}>
-                                            <NeonOffer
-                                                onSelectPlan={(planId) => setSelectedPlan(planId)}
-                                                onCheckout={(planId) => {
-                                                    setSelectedPlan(planId);
-                                                    if (!authUserId) setShowAuthModal(true);
-                                                    else setStage("checkout");
-                                                }}
-                                                authUserId={authUserId}
-                                                creditsRemaining={creditsRemaining}
-                                                timeRemaining={timeRemaining}
-                                                showHeader={true}
-                                            />
-                                        </div>
-                                    )}
-
-                                    {/* Bot├úo Voltar Discreto */}
-                                    <div style={{ textAlign: "center", marginTop: 16 }}>
-                                        <button
-                                            type="button"
-                                            onClick={() => setStage("hero")}
-                                            style={{
-                                                background: "none",
-                                                border: "none",
-                                                color: "#475569",
-                                                fontSize: "0.85rem",
-                                                cursor: "pointer",
-                                                display: "inline-flex",
-                                                alignItems: "center",
-                                                justifyContent: "center",
-                                                gap: 6,
-                                                padding: "10px"
-                                            }}
-                                        >
-                                            ÔåÉ Voltar para edi├º├úo
-                                        </button>
-                                    </div>
+                                            </>
+                                        );
+                                    })()}
                                 </div>
-                            </>
-                        );
-                    })()}
-                </div>
-            )
-            }
+                            )
+                        }
 
-            {
-                stage === "checkout" && (
-                    <div className="hero-container">
-                        <div className="action-island-container">
-                            {(() => {
-                                const planId = (selectedPlan || "premium_plus").trim();
-
-                                const prices: any = {
-                                    credit_1: {
-                                        price: 12.90,
-                                        name: "1 Cr├®dito Avulso",
-                                        billing: "one_time",
-                                        desc: "Otimiza├º├úo pontual"
-                                    },
-                                    credit_3: {
-                                        price: 29.90,
-                                        name: "Pacote 3 Cr├®ditos",
-                                        billing: "one_time",
-                                        desc: "3 otimiza├º├Áes completas"
-                                    },
-                                    pro_monthly: {
-                                        price: 27.90,
-                                        name: "VANT Pro Mensal",
-                                        billing: "subscription",
-                                        desc: "Otimiza├º├Áes ilimitadas"
-                                    },
-                                    pro_annual: {
-                                        price: 239.00,
-                                        name: "VANT Pro Anual",
-                                        billing: "subscription",
-                                        desc: "Economize 29% vs mensal"
-                                    },
-                                    trial: {
-                                        price: 1.99,
-                                        name: "Trial 7 Dias",
-                                        billing: "trial",
-                                        desc: "Teste PRO por 7 dias"
-                                    },
-                                    premium_plus: {
-                                        price: 29.90,
-                                        name: "VANT Pro Mensal (Legacy)",
-                                        billing: "subscription",
-                                        desc: "Plano legado"
-                                    },
-                                    basico: {
-                                        price: 9.90,
-                                        name: "1 Cr├®dito (Legacy)",
-                                        billing: "one_time",
-                                        desc: "Plano legado"
-                                    },
-                                };
-
-                                const plan = prices[planId] || prices.premium_plus;
-                                // CORRE├ç├âO: Trial tamb├®m ├® um fluxo de assinatura/recorr├¬ncia
-                                const isSubscription = plan.billing === "subscription" || plan.billing === "trial";
-
-                                let billingLine = "Ô£à Pagamento ├║nico ┬À Acesso vital├¡cio aos cr├®ditos";
-                                // CORRE├ç├âO: Melhorar o texto de billing para trial
-                                if (plan.billing === "trial") {
-                                    billingLine = "Ô£à 7 dias de teste por R$ 1,99, depois assinatura mensal";
-                                } else if (plan.billing === "subscription") {
-                                    billingLine = "Ô£à Assinatura mensal ┬À Cancele quando quiser";
-                                }
+                        {
+                            stage === "checkout" && (
+                                <div className="hero-container">
+                                    <div className="action-island-container">
+                                        {(() => {
+                                            const planId = (selectedPlan || "premium_plus").trim();
+
+                                            const prices: any = {
+                                                credit_1: {
+                                                    price: 12.90,
+                                                    name: "1 Cr├®dito Avulso",
+                                                    billing: "one_time",
+                                                    desc: "Otimiza├º├úo pontual"
+                                                },
+                                                credit_3: {
+                                                    price: 29.90,
+                                                    name: "Pacote 3 Cr├®ditos",
+                                                    billing: "one_time",
+                                                    desc: "3 otimiza├º├Áes completas"
+                                                },
+                                                pro_monthly: {
+                                                    price: 27.90,
+                                                    name: "VANT Pro Mensal",
+                                                    billing: "subscription",
+                                                    desc: "Otimiza├º├Áes ilimitadas"
+                                                },
+                                                pro_annual: {
+                                                    price: 239.00,
+                                                    name: "VANT Pro Anual",
+                                                    billing: "subscription",
+                                                    desc: "Economize 29% vs mensal"
+                                                },
+                                                trial: {
+                                                    price: 1.99,
+                                                    name: "Trial 7 Dias",
+                                                    billing: "trial",
+                                                    desc: "Teste PRO por 7 dias"
+                                                },
+                                                premium_plus: {
+                                                    price: 29.90,
+                                                    name: "VANT Pro Mensal (Legacy)",
+                                                    billing: "subscription",
+                                                    desc: "Plano legado"
+                                                },
+                                                basico: {
+                                                    price: 9.90,
+                                                    name: "1 Cr├®dito (Legacy)",
+                                                    billing: "one_time",
+                                                    desc: "Plano legado"
+                                                },
+                                            };
+
+                                            const plan = prices[planId] || prices.premium_plus;
+                                            // CORRE├ç├âO: Trial tamb├®m ├® um fluxo de assinatura/recorr├¬ncia
+                                            const isSubscription = plan.billing === "subscription" || plan.billing === "trial";
+
+                                            let billingLine = "Ô£à Pagamento ├║nico ┬À Acesso vital├¡cio aos cr├®ditos";
+                                            // CORRE├ç├âO: Melhorar o texto de billing para trial
+                                            if (plan.billing === "trial") {
+                                                billingLine = "Ô£à 7 dias de teste por R$ 1,99, depois assinatura mensal";
+                                            } else if (plan.billing === "subscription") {
+                                                billingLine = "Ô£à Assinatura mensal ┬À Cancele quando quiser";
+                                            }
 
-                                const boxHtml = `
+                                            const boxHtml = `
                             <div style="background: rgba(15, 23, 42, 0.6); padding: 24px; border-radius: 12px; margin-bottom: 20px; border: 1px solid rgba(56, 189, 248, 0.2);">
                                 <div style="display:flex; justify-content: space-between; align-items:start; margin-bottom: 12px;">
                                     <div>
@@ -3673,147 +3766,150 @@ export default function AppPage() {
                             </div>
                             `;
 
-                                return (
-                                    <>
-                                        <div style={{ textAlign: "center", marginBottom: 24 }}>
-                                            <div style={{ color: "#E2E8F0", fontSize: "1.5rem", fontWeight: 800 }}>
-                                                Finalizar Compra
-                                            </div>
-                                            <div style={{ color: "#94A3B8", fontSize: "0.9rem", marginTop: 4 }}>
-                                                Ambiente seguro e criptografado
-                                            </div>
-                                        </div>
+                                            return (
+                                                <>
+                                                    <div style={{ textAlign: "center", marginBottom: 24 }}>
+                                                        <div style={{ color: "#E2E8F0", fontSize: "1.5rem", fontWeight: 800 }}>
+                                                            Finalizar Compra
+                                                        </div>
+                                                        <div style={{ color: "#94A3B8", fontSize: "0.9rem", marginTop: 4 }}>
+                                                            Ambiente seguro e criptografado
+                                                        </div>
+                                                    </div>
 
-                                        <div dangerouslySetInnerHTML={{ __html: boxHtml }} />
+                                                    <div dangerouslySetInnerHTML={{ __html: boxHtml }} />
+
+                                                    {!authUserId ? (
+                                                        <>
+                                                            <div style={{ marginBottom: 20, padding: 16, background: "rgba(56, 189, 248, 0.05)", border: "1px solid rgba(56, 189, 248, 0.2)", borderRadius: 8, textAlign: "center" }}>
+                                                                <div style={{ color: "#38BDF8", fontSize: "0.9rem", fontWeight: 600, marginBottom: 4 }}>
+                                                                    ­ƒöÆ Identifique-se para salvar seu acesso
+                                                                </div>
+                                                                <div style={{ color: "#94A3B8", fontSize: "0.85rem" }}>
+                                                                    Seus cr├®ditos ficar├úo vinculados ├á sua conta.
+                                                                </div>
+                                                            </div>
 
-                                        {!authUserId ? (
-                                            <>
-                                                <div style={{ marginBottom: 20, padding: 16, background: "rgba(56, 189, 248, 0.05)", border: "1px solid rgba(56, 189, 248, 0.2)", borderRadius: 8, textAlign: "center" }}>
-                                                    <div style={{ color: "#38BDF8", fontSize: "0.9rem", fontWeight: 600, marginBottom: 4 }}>
-                                                        ­ƒöÆ Identifique-se para salvar seu acesso
-                                                    </div>
-                                                    <div style={{ color: "#94A3B8", fontSize: "0.85rem" }}>
-                                                        Seus cr├®ditos ficar├úo vinculados ├á sua conta.
-                                                    </div>
-                                                </div>
+                                                            <div data-testid="stButton" className="stButton" style={{ width: "100%", marginBottom: 16 }}>
+                                                                <button
+                                                                    type="button"
+                                                                    onClick={handleGoogleLogin}
+                                                                    disabled={isAuthenticating}
+                                                                    style={{
+                                                                        width: "100%", height: 52, background: "#fff", color: "#1f2937",
+                                                                        border: "1px solid rgba(255,255,255,0.2)", borderRadius: 8,
+                                                                        fontSize: "1rem", fontWeight: 600, display: "flex", alignItems: "center", justifyContent: "center", gap: 12,
+                                                                        cursor: isAuthenticating ? "not-allowed" : "pointer", opacity: isAuthenticating ? 0.6 : 1
+                                                                    }}
+                                                                >
+                                                                    <svg width="20" height="20" viewBox="0 0 18 18">
+                                                                        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z" />
+                                                                        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z" />
+                                                                        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z" />
+                                                                        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.293C4.672 5.163 6.656 3.58 9 3.58z" />
+                                                                    </svg>
+                                                                    {isAuthenticating ? "Autenticando..." : "Continuar com Google"}
+                                                                </button>
+                                                            </div>
 
-                                                <div data-testid="stButton" className="stButton" style={{ width: "100%", marginBottom: 16 }}>
-                                                    <button
-                                                        type="button"
-                                                        onClick={handleGoogleLogin}
-                                                        disabled={isAuthenticating}
-                                                        style={{
-                                                            width: "100%", height: 52, background: "#fff", color: "#1f2937",
-                                                            border: "1px solid rgba(255,255,255,0.2)", borderRadius: 8,
-                                                            fontSize: "1rem", fontWeight: 600, display: "flex", alignItems: "center", justifyContent: "center", gap: 12,
-                                                            cursor: isAuthenticating ? "not-allowed" : "pointer", opacity: isAuthenticating ? 0.6 : 1
-                                                        }}
-                                                    >
-                                                        <svg width="20" height="20" viewBox="0 0 18 18">
-                                                            <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z" />
-                                                            <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z" />
-                                                            <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z" />
-                                                            <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.293C4.672 5.163 6.656 3.58 9 3.58z" />
-                                                        </svg>
-                                                        {isAuthenticating ? "Autenticando..." : "Continuar com Google"}
-                                                    </button>
-                                                </div>
+                                                            <div style={{ textAlign: "center" }}>
+                                                                <button type="button" onClick={() => setShowAuthModal(true)} style={{ background: "none", border: "none", color: "#64748B", fontSize: "0.85rem", textDecoration: "underline", cursor: "pointer" }}>
+                                                                    Prefiro usar e-mail e senha
+                                                                </button>
+                                                            </div>
+                                                        </>
+                                                    ) : (
+                                                        <>
+                                                            <div style={{ marginBottom: 16, padding: "12px 16px", background: "rgba(16, 185, 129, 0.1)", border: "1px solid rgba(16, 185, 129, 0.3)", borderRadius: 8, display: "flex", alignItems: "center", gap: 10 }}>
+                                                                <div style={{ fontSize: "1.2rem" }}>­ƒæñ</div>
+                                                                <div style={{ overflow: "hidden" }}>
+                                                                    <div style={{ color: "#10B981", fontSize: "0.75rem", fontWeight: 700, textTransform: "uppercase" }}>Logado como</div>
+                                                                    <div style={{ color: "#E2E8F0", fontSize: "0.9rem", whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{authEmail}</div>
+                                                                </div>
+                                                            </div>
 
-                                                <div style={{ textAlign: "center" }}>
-                                                    <button type="button" onClick={() => setShowAuthModal(true)} style={{ background: "none", border: "none", color: "#64748B", fontSize: "0.85rem", textDecoration: "underline", cursor: "pointer" }}>
-                                                        Prefiro usar e-mail e senha
-                                                    </button>
-                                                </div>
-                                            </>
-                                        ) : (
-                                            <>
-                                                <div style={{ marginBottom: 16, padding: "12px 16px", background: "rgba(16, 185, 129, 0.1)", border: "1px solid rgba(16, 185, 129, 0.3)", borderRadius: 8, display: "flex", alignItems: "center", gap: 10 }}>
-                                                    <div style={{ fontSize: "1.2rem" }}>­ƒæñ</div>
-                                                    <div style={{ overflow: "hidden" }}>
-                                                        <div style={{ color: "#10B981", fontSize: "0.75rem", fontWeight: 700, textTransform: "uppercase" }}>Logado como</div>
-                                                        <div style={{ color: "#E2E8F0", fontSize: "0.9rem", whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{authEmail}</div>
-                                                    </div>
-                                                </div>
+                                                            <div data-testid="stButton" className="stButton" style={{ width: "100%" }}>
+                                                                <button type="button" data-kind="primary" onClick={startCheckout} style={{ width: "100%", height: 56, fontSize: "1.1rem", background: "#10B981", color: "#fff", border: "none", borderRadius: 10, fontWeight: 700, cursor: "pointer", boxShadow: "0 4px 12px rgba(16, 185, 129, 0.4)" }}>
+                                                                    IR PARA PAGAMENTO SEGURO
+                                                                </button>
+                                                            </div>
 
-                                                <div data-testid="stButton" className="stButton" style={{ width: "100%" }}>
-                                                    <button type="button" data-kind="primary" onClick={startCheckout} style={{ width: "100%", height: 56, fontSize: "1.1rem", background: "#10B981", color: "#fff", border: "none", borderRadius: 10, fontWeight: 700, cursor: "pointer", boxShadow: "0 4px 12px rgba(16, 185, 129, 0.4)" }}>
-                                                        IR PARA PAGAMENTO SEGURO
-                                                    </button>
-                                                </div>
+                                                            <div style={{ display: "flex", justifyContent: "center", alignItems: "center", gap: "16px", marginTop: "16px", opacity: 0.6 }}>
+                                                                <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒÆ│</div>
+                                                                <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒÆ│</div>
+                                                                <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒôì</div>
+                                                                <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒÆ│</div>
+                                                            </div>
+                                                            <div style={{ textAlign: "center", marginTop: 4, color: "#64748B", fontSize: "0.75rem" }}>
+                                                                Aceitamos Visa, Mastercard, PIX e Amex
+                                                            </div>
 
-                                                <div style={{ display: "flex", justifyContent: "center", alignItems: "center", gap: "16px", marginTop: "16px", opacity: 0.6 }}>
-                                                    <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒÆ│</div>
-                                                    <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒÆ│</div>
-                                                    <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒôì</div>
-                                                    <div style={{ fontSize: "1.5rem", filter: "grayscale(100%)", opacity: 0.7 }}>­ƒÆ│</div>
-                                                </div>
-                                                <div style={{ textAlign: "center", marginTop: 4, color: "#64748B", fontSize: "0.75rem" }}>
-                                                    Aceitamos Visa, Mastercard, PIX e Amex
-                                                </div>
+                                                            {/* TRUST SIGNALS - SVGs OFICIAIS & BLINDAGEM */}
+                                                            <div style={{ marginTop: 24, display: "flex", flexDirection: "column", alignItems: "center", gap: 12 }}>
 
-                                                {/* TRUST SIGNALS - SVGs OFICIAIS & BLINDAGEM */}
-                                                <div style={{ marginTop: 24, display: "flex", flexDirection: "column", alignItems: "center", gap: 12 }}>
+                                                                {/* ├ìcones de Pagamento (Grayscale -> Color on Hover) */}
+                                                                <div
+                                                                    style={{ display: "flex", alignItems: "center", gap: 20, opacity: 0.7, filter: "grayscale(100%)", transition: "all 0.3s ease" }}
+                                                                    onMouseEnter={(e) => { e.currentTarget.style.filter = "grayscale(0%)"; e.currentTarget.style.opacity = "1"; }}
+                                                                    onMouseLeave={(e) => { e.currentTarget.style.filter = "grayscale(100%)"; e.currentTarget.style.opacity = "0.7"; }}
+                                                                >
+                                                                    {/* PIX (Logo Oficial) */}
+                                                                    <img src="/icons/pix.svg" alt="Pix" style={{ height: "24px", width: "auto" }} />
 
-                                                    {/* ├ìcones de Pagamento (Grayscale -> Color on Hover) */}
-                                                    <div
-                                                        style={{ display: "flex", alignItems: "center", gap: 20, opacity: 0.7, filter: "grayscale(100%)", transition: "all 0.3s ease" }}
-                                                        onMouseEnter={(e) => { e.currentTarget.style.filter = "grayscale(0%)"; e.currentTarget.style.opacity = "1"; }}
-                                                        onMouseLeave={(e) => { e.currentTarget.style.filter = "grayscale(100%)"; e.currentTarget.style.opacity = "0.7"; }}
-                                                    >
-                                                        {/* PIX (Logo Oficial) */}
-                                                        <img src="/icons/pix.svg" alt="Pix" style={{ height: "24px", width: "auto" }} />
+                                                                    {/* VISA (Logo Oficial) */}
+                                                                    <img src="/icons/visa.svg" alt="Visa" style={{ height: "16px", width: "auto" }} />
 
-                                                        {/* VISA (Logo Oficial) */}
-                                                        <img src="/icons/visa.svg" alt="Visa" style={{ height: "16px", width: "auto" }} />
+                                                                    {/* MASTERCARD (Logo Oficial) */}
+                                                                    <img src="/icons/mastercard.svg" alt="Mastercard" style={{ height: "24px", width: "auto" }} />
 
-                                                        {/* MASTERCARD (Logo Oficial) */}
-                                                        <img src="/icons/mastercard.svg" alt="Mastercard" style={{ height: "24px", width: "auto" }} />
+                                                                    {/* AMEX (Logo Oficial) */}
+                                                                    <img src="/icons/amex.svg" alt="American Express" style={{ height: "24px", width: "auto" }} />
+                                                                </div>
 
-                                                        {/* AMEX (Logo Oficial) */}
-                                                        <img src="/icons/amex.svg" alt="American Express" style={{ height: "24px", width: "auto" }} />
-                                                    </div>
+                                                                <div style={{ display: "flex", alignItems: "center", gap: 6 }}>
+                                                                    <span style={{ fontSize: "0.9rem" }}>­ƒöÆ</span>
+                                                                    <span style={{ color: "#64748B", fontSize: "0.75rem", fontWeight: 500, letterSpacing: "0.3px" }}>
+                                                                        Pagamento processado via Stripe ÔÇó Dados Criptografados
+                                                                    </span>
+                                                                </div>
+                                                            </div>
+                                                        </>
+                                                    )}
 
-                                                    <div style={{ display: "flex", alignItems: "center", gap: 6 }}>
-                                                        <span style={{ fontSize: "0.9rem" }}>­ƒöÆ</span>
-                                                        <span style={{ color: "#64748B", fontSize: "0.75rem", fontWeight: 500, letterSpacing: "0.3px" }}>
-                                                            Pagamento processado via Stripe ÔÇó Dados Criptografados
-                                                        </span>
-                                                    </div>
-                                                </div>
-                                            </>
-                                        )}
+                                                    {checkoutError && (
+                                                        <div style={{ marginTop: 16, padding: 12, background: checkoutError.startsWith("Ô£à") ? "rgba(16, 185, 129, 0.1)" : "rgba(239, 68, 68, 0.1)", border: `1px solid ${checkoutError.startsWith("Ô£à") ? "#10B981" : "#EF4444"}`, borderRadius: 8, color: checkoutError.startsWith("Ô£à") ? "#10B981" : "#EF4444", fontSize: "0.85rem", textAlign: "center" }}>
+                                                            {checkoutError}
+                                                        </div>
+                                                    )}
 
-                                        {checkoutError && (
-                                            <div style={{ marginTop: 16, padding: 12, background: checkoutError.startsWith("Ô£à") ? "rgba(16, 185, 129, 0.1)" : "rgba(239, 68, 68, 0.1)", border: `1px solid ${checkoutError.startsWith("Ô£à") ? "#10B981" : "#EF4444"}`, borderRadius: 8, color: checkoutError.startsWith("Ô£à") ? "#10B981" : "#EF4444", fontSize: "0.85rem", textAlign: "center" }}>
-                                                {checkoutError}
-                                            </div>
-                                        )}
+                                                    <div style={{ textAlign: "center", marginTop: 24 }}>
+                                                        <button type="button" onClick={() => setStage("preview")} style={{ background: "none", border: "none", color: "#64748B", fontSize: "0.85rem", cursor: "pointer", display: "inline-flex", alignItems: "center", gap: 6 }}>
+                                                            ÔåÉ Alterar plano
+                                                        </button>
+                                                    </div>
+                                                </>
+                                            );
+                                        })()}
+                                    </div>
+                                </div>
+                            )
+                        }
 
-                                        <div style={{ textAlign: "center", marginTop: 24 }}>
-                                            <button type="button" onClick={() => setStage("preview")} style={{ background: "none", border: "none", color: "#64748B", fontSize: "0.85rem", cursor: "pointer", display: "inline-flex", alignItems: "center", gap: 6 }}>
-                                                ÔåÉ Alterar plano
-                                            </button>
-                                        </div>
-                                    </>
-                                );
-                            })()}
-                        </div>
-                    </div>
-                )
+                        <AuthModal
+                            isOpen={showAuthModal}
+                            selectedPlan={selectedPlan}
+                            supabase={supabase}
+                            lastCV={lastCV}
+                            onUseLastCV={useLastCV}
+                            onSuccess={(userId, email) => {
+                                setAuthUserId(userId);
+                                setAuthEmail(email);
+                                setShowAuthModal(false);
+                            }}
+                            onClose={() => setShowAuthModal(false)}
+                        />
+                    </main>
+                );
             }
-
-            <AuthModal
-                isOpen={showAuthModal}
-                selectedPlan={selectedPlan}
-                supabase={supabase}
-                onSuccess={(userId, email) => {
-                    setAuthUserId(userId);
-                    setAuthEmail(email);
-                    setShowAuthModal(false);
-                    // N├úo for├ºar checkout - deixar useEffect decidir baseado no status do usu├írio
-                }}
-                onClose={() => setShowAuthModal(false)}
-            />
-        </main>
-    );
+        }
 }
